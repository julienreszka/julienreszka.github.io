<!-- 
 The goal of this experiment is to make the most accessible mobile UI for optimal reachability with one hand
 I already set constrains for a mobile viewport of 320x568px (iPhone SE 1st gen)
-->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>OptUI - Optimal Mobile Interface</title>
  </head>

  <style>
    /* Reset some default styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      margin: 0;
      width: 100svw;
      height: 100svh;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
        sans-serif;
      position: relative;
      overflow: hidden;
      touch-action: manipulation;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    /* Thumb-friendly zone visualization */
    .thumb-zone {
      position: fixed;
      bottom: 0;
      right: 0;
      width: 200px;
      height: 200px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 100% 0 0 0;
      pointer-events: none;
      border: 2px dashed rgba(255, 255, 255, 0.3);
    }

    /* Header area - less accessible */
    .header {
      padding: 30px 20px 20px;
      text-align: center;
      background: rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 2;
      border-radius: 1rem;
    }

    .header h1 {
      color: white;
      font-size: 24px;
      font-weight: 300;
      margin-bottom: 8px;
    }

    .header p {
      color: rgba(255, 255, 255, 0.8);
      font-size: 14px;
    }

    /* Content area */
    .content {
      padding: 20px;
      padding-bottom: 220px; /* Reserve space for thumb zone actions */
      height: calc(100% - 140px);
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      overflow-y: auto;
    }

    /* Cards in easy-reach area */
    .card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 12px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    }

    .card h3 {
      color: #333;
      font-size: 18px;
      margin-bottom: 8px;
    }

    .card p {
      color: #666;
      font-size: 14px;
      line-height: 1.4;
    }

    /* Primary action buttons in thumb zone */
    .action-area {
      position: absolute;
      bottom: 110px;
      right: 30px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: flex-end;
    }

    .btn {
      padding: 10px 16px;
      border: none;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 100px;
      text-align: center;
    }

    .btn-primary {
      background: #ff6b6b;
      color: white;
      box-shadow: 0 4px 20px rgba(255, 107, 107, 0.3);
    }

    .btn-primary:hover {
      background: #ff5252;
      transform: translateY(-1px);
      box-shadow: 0 6px 25px rgba(255, 107, 107, 0.4);
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.9);
      color: #333;
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .btn-secondary:hover {
      background: white;
      transform: translateY(-1px);
    }

    /* Floating action button */
    .fab-container {
      z-index: 3;
      position: fixed;
      bottom: 30px;
      right: 30px;
    }

    .fab {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: #4ecdc4;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(78, 205, 196, 0.3);
      transition: all 0.2s ease;
      position: relative;
      z-index: 12;
      /* Remove iOS tap highlight and focus outline */
      -webkit-tap-highlight-color: transparent;
      outline: none;
      -webkit-appearance: none;
    }

    .fab:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 25px rgba(78, 205, 196, 0.4);
    }

    .fab.active {
      transform: rotate(45deg);
      background: #ff6b6b;
    }

    /* FAB action menu */
    .fab-actions {
      position: absolute;
      bottom: 0;
      right: 0;
      opacity: 0;
      transform: scale(0.8);
      transition: all 0.2s ease;
      pointer-events: none;
    }

    .fab-actions.show {
      opacity: 1;
      transform: scale(1);
      pointer-events: all;
    }

    /* FAB actions positioned by JavaScript */
    .fab-action {
      position: absolute;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      border: none;
      color: white;
      font-size: 18px;
      cursor: pointer;
      box-shadow: 0 3px 15px rgba(0, 0, 0, 0.2);
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      /* Position will be set by JavaScript */
    }

    /* FAB action labels */
    .fab-label {
      position: absolute;
      color: white;
      font-size: 7px;
      font-weight: 600;
      text-align: center;
      background: rgba(0, 0, 0, 0.7);
      padding: 2px 6px;
      border-radius: 8px;
      width: 50px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      opacity: 0;
      transform: translateY(5px);
      transition: all 0.2s ease;
      pointer-events: none;
      /* Position will be set by JavaScript */
    }

    .fab-actions.show .fab-label {
      opacity: 1;
      transform: translateY(0);
    }

    /* Layer-specific label delays */
    .fab-label.layer-1-5 {
      transition: all 0.25s ease 0.05s;
    }

    .fab-label.layer-2 {
      transition: all 0.3s ease 0.1s;
    }

    .fab-action:hover {
      transform: translateY(-2px) scale(1.1);
    }

    .fab-action.share {
      background: #ff9500;
    }

    .fab-action.settings {
      background: #9b59b6;
    }

    .fab-action.help {
      background: #3498db;
    }

    .fab-action.close {
      background: #e74c3c;
    }

    /* Second layer button styles */
    .fab-action.search {
      background: #e74c3c;
    }

    .fab-action.bookmark {
      background: #f39c12;
    }

    .fab-action.edit {
      background: #27ae60;
    }

    .fab-action.more {
      background: #34495e;
    }

    .fab-action.notification {
      background: #e67e22;
    }

    .fab-action.profile {
      background: #2c3e50;
    }

    /* Middle layer button styles */
    .fab-action.camera {
      background: #8e44ad;
    }

    .fab-action.message {
      background: #16a085;
    }

    .fab-action.favorite {
      background: #f1c40f;
    }

    .fab-action.calendar {
      background: #e74c3c;
    }

    .fab-action.location {
      background: #34495e;
    }

    /* Middle layer buttons - between layer 1 and 2 */
    .fab-action.layer-1-5 {
      width: 46px;
      height: 46px;
      font-size: 17px;
      opacity: 0;
      transform: scale(0.7);
      transition: all 0.25s ease 0.05s;
    }

    .fab-actions.show .fab-action.layer-1-5 {
      opacity: 1;
      transform: scale(1);
    }

    /* Layer 2 buttons are slightly smaller and have delayed animation */
    .fab-action.layer-2 {
      width: 44px;
      height: 44px;
      font-size: 16px;
      opacity: 0;
      transform: scale(0.6);
      transition: all 0.3s ease 0.1s;
    }

    .fab-actions.show .fab-action.layer-2 {
      opacity: 1;
      transform: scale(1);
    }

    /* Quick access buttons in thumb zone */
    .quick-actions {
      position: absolute;
      bottom: 220px;
      right: 30px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: flex-end;
    }

    .quick-btn {
      padding: 8px 12px;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      border-radius: 15px;
      color: white;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
      backdrop-filter: blur(10px);
    }

    .quick-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateX(-5px);
    }

    /* FAB menu overlay */
    .fab-overlay {
      position: fixed;
      bottom: 0;
      right: 0;
      width: 320px;
      height: 320px;
      background: radial-gradient(
        circle at bottom right,
        rgba(0, 0, 0, 0.3) 0%,
        rgba(0, 0, 0, 0.1) 60%,
        transparent 80%
      );
      backdrop-filter: blur(8px);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease;
      z-index: 0;
      border-top-left-radius: 100%;
    }

    .fab-overlay.show {
      opacity: 1;
    }

    /* Demonstration overlay */
    .demo-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.15s ease;
      cursor: pointer;
    }

    .demo-overlay.active {
      opacity: 1;
      pointer-events: all;
    }

    .demo-text {
      color: white;
      text-align: center;
      font-size: 18px;
      max-width: 250px;
    }

    /* Accessibility indicators */
    .zone-indicator {
      position: absolute;
      right: 100px;
      bottom: 40px;
      font-size: 10px;
      color: rgba(255, 255, 255, 0.6);
      font-weight: bold;
      text-align: center;
      z-index: 5;
    }

    /* Desktop styles - limit content width */
    @media (min-width: 1200px) {
      body {
        max-width: 1200px;
        margin: 0 auto;
      }
    }
  </style>

  <body>
    <!-- Thumb-friendly zone visualization -->
    <div class="thumb-zone"></div>

    <!-- Header - harder to reach -->
    <div class="header">
      <h1>OptUI Demo</h1>
      <p>One-handed mobile interface optimization</p>
    </div>

    <!-- Main content -->
    <div class="content">
      <!-- Less important content higher up -->
      <div class="card">
        <h3>üìä Analytics</h3>
        <p>View detailed insights and performance metrics</p>
      </div>
    </div>

    <!-- Floating action button with expandable menu -->
    <div class="fab-container">
      <!-- Overlay that appears below the buttons -->
      <div class="fab-overlay" id="fabOverlay"></div>
      <button class="fab" onclick="toggleFAB()" id="mainFAB">‚ö°</button>
      <div class="fab-actions" id="fabActions">
        <!-- First layer - closer to FAB -->
        <button class="fab-action share" onclick="shareAction()" title="Share">
          üì§
        </button>
        <div class="fab-label share-label">Share</div>
        <button
          class="fab-action settings"
          onclick="settingsAction()"
          title="Settings"
        >
          ‚öôÔ∏è
        </button>
        <div class="fab-label settings-label">Settings</div>
        <button class="fab-action help" onclick="helpAction()" title="Help">
          ‚ùì
        </button>
        <div class="fab-label help-label">Help</div>
        <button class="fab-action close" onclick="closeAction()" title="Close">
          ‚úï
        </button>
        <div class="fab-label close-label">Close</div>

        <!-- Second layer - further out -->
        <button
          class="fab-action search layer-2"
          onclick="searchAction()"
          title="Search"
        >
          üîç
        </button>
        <div class="fab-label search-label layer-2">Search</div>
        <button
          class="fab-action bookmark layer-2"
          onclick="bookmarkAction()"
          title="Bookmark"
        >
          üîñ
        </button>
        <div class="fab-label bookmark-label layer-2">Bookmark</div>
        <button
          class="fab-action edit layer-2"
          onclick="editAction()"
          title="Edit"
        >
          ‚úèÔ∏è
        </button>
        <div class="fab-label edit-label layer-2">Edit</div>
        <button
          class="fab-action more layer-2"
          onclick="moreAction()"
          title="More"
        >
          ‚ãØ
        </button>
        <div class="fab-label more-label layer-2">More</div>
        <button
          class="fab-action notification layer-2"
          onclick="notificationAction()"
          title="Notifications"
        >
          üîî
        </button>
        <div class="fab-label notification-label layer-2">Notify</div>
        <button
          class="fab-action profile layer-2"
          onclick="profileAction()"
          title="Profile"
        >
          üë§
        </button>
        <div class="fab-label profile-label layer-2">Profile</div>

        <!-- Middle layer - between layer 1 and 2 -->
        <button
          class="fab-action camera layer-1-5"
          onclick="cameraAction()"
          title="Camera"
        >
          üì∑
        </button>
        <div class="fab-label camera-label layer-1-5">Camera</div>
        <button
          class="fab-action message layer-1-5"
          onclick="messageAction()"
          title="Messages"
        >
          üí¨
        </button>
        <div class="fab-label message-label layer-1-5">Messages</div>
        <button
          class="fab-action favorite layer-1-5"
          onclick="favoriteAction()"
          title="Favorites"
        >
          ‚≠ê
        </button>
        <div class="fab-label favorite-label layer-1-5">Favorites</div>
        <button
          class="fab-action calendar layer-1-5"
          onclick="calendarAction()"
          title="Calendar"
        >
          üìÖ
        </button>
        <div class="fab-label calendar-label layer-1-5">Calendar</div>
        <button
          class="fab-action location layer-1-5"
          onclick="locationAction()"
          title="Location"
        >
          üìç
        </button>
        <div class="fab-label location-label layer-1-5">Location</div>
      </div>
    </div>

    <!-- Demo overlay -->
    <div class="demo-overlay" id="demoOverlay" onclick="hideOverlay()">
      <div class="demo-text" id="demoText">
        Thumb-friendly zone optimizes for natural hand position
      </div>
    </div>

    <script>
      let demoActive = false;
      let zoneVisible = true;
      let fabOpen = false;

      // Position FAB actions using dynamic arc calculations
      function positionFABActions() {
        const actions = document.querySelectorAll(".fab-action");
        const labels = document.querySelectorAll(".fab-label");
        const fabButton = document.querySelector(".fab");

        // Configuration based on human thumb reach ergonomics
        const config = {
          baseRadius: 110, // ~110px from corner = comfortable thumb reach with clearance
          radiusMultiplier: 1.9, // Second layer at ~209px = maximum separation
          maxArcAngle: 85, // 85¬∞ arc = wider spread for layer 1 buttons
          buttonSizeRatio: 0.9, // Layer 2 slightly smaller for easier targeting
          minButtonGap: 24, // 24px minimum gap for better touch accuracy
          labelOffset: 28, // Distance below button for label
        };

        setTimeout(() => {
          // Separate actions and labels by layer
          const layer1Actions = Array.from(actions).filter((_, i) => i < 4);
          const layer15Actions = Array.from(actions).filter((action) =>
            action.classList.contains("layer-1-5")
          );
          const layer2Actions = Array.from(actions).filter((action) =>
            action.classList.contains("layer-2")
          );

          const layer1Labels = Array.from(labels).filter((_, i) => i < 4);
          const layer15Labels = Array.from(labels).filter((label) =>
            label.classList.contains("layer-1-5")
          );
          const layer2Labels = Array.from(labels).filter((label) =>
            label.classList.contains("layer-2")
          );

          // Calculate optimal spacing for each layer
          function positionLayer(layerActions, layerLabels, layerIndex) {
            const radiusMultipliers = [1.2, 1.7, 2.2]; // Layer 1, 1.5, 2 spacing - increased separation
            const radius = config.baseRadius * radiusMultipliers[layerIndex];
            const buttonCount = layerActions.length;

            // Calculate angle step based on button count and arc constraints
            const maxAngleStep =
              config.maxArcAngle / Math.max(1, buttonCount - 1);

            // Button sizes for each layer
            const buttonSizes = [48, 46, 44]; // Layer 1, 1.5, 2 sizes
            const buttonSize = buttonSizes[layerIndex];

            // Ensure minimum gap between buttons
            const minAngleForGap =
              Math.asin(config.minButtonGap / radius) * (180 / Math.PI) * 2;
            const angleStep = Math.max(maxAngleStep, minAngleForGap);

            // Center the arc around 45 degrees (optimal thumb reach)
            const totalArc = angleStep * Math.max(0, buttonCount - 1);
            const startAngle = 45 - totalArc / 2;

            layerActions.forEach((action, buttonIndex) => {
              const angle = startAngle + buttonIndex * angleStep;
              const radians = (angle * Math.PI) / 180;

              // Calculate position
              const x = radius * Math.cos(radians);
              const y = radius * Math.sin(radians);

              // Center button on calculated point
              const centerOffset = buttonSize / 2;
              action.style.right = x - centerOffset + "px";
              action.style.bottom = y - centerOffset + "px";

              // Position corresponding label below button
              if (layerLabels[buttonIndex]) {
                const label = layerLabels[buttonIndex];
                const labelY = y - config.labelOffset;
                const labelWidth = 50; // Fixed width from CSS
                label.style.right = x - labelWidth / 2 + "px"; // Center label precisely
                label.style.bottom = labelY + "px";
              }

              console.log(
                `Layer ${layerIndex + 1} - ${action.title}: ${angle.toFixed(
                  1
                )}¬∞, r=${radius.toFixed(1)}px`
              );
            });
          }

          // Position all three layers
          positionLayer(layer1Actions, layer1Labels, 0);
          positionLayer(layer15Actions, layer15Labels, 1);
          positionLayer(layer2Actions, layer2Labels, 2);
        }, 50);
      }

      function toggleFAB() {
        const fab = document.getElementById("mainFAB");
        const actions = document.getElementById("fabActions");
        const overlay = document.getElementById("fabOverlay");

        if (!fabOpen) {
          fab.classList.add("active");
          actions.classList.add("show");
          overlay.classList.add("show");
          fabOpen = true;
        } else {
          fab.classList.remove("active");
          actions.classList.remove("show");
          overlay.classList.remove("show");
          fabOpen = false;
        }
      }

      function shareAction() {
        showDemoMessage(
          "üì§ Share functionality - Export your optimal UI design"
        );
        toggleFAB(); // Close FAB menu
      }

      function settingsAction() {
        showDemoMessage("‚öôÔ∏è Settings - Customize thumb reach preferences");
        toggleFAB(); // Close FAB menu
      }

      function helpAction() {
        showDemoMessage("‚ùì Help - Learn about one-handed UI optimization");
        toggleFAB(); // Close FAB menu
      }

      function closeAction() {
        showDemoMessage("‚úï Close - Exit or dismiss current view");
        toggleFAB(); // Close FAB menu
      }

      function searchAction() {
        showDemoMessage(
          "üîç Search - Find content optimized for thumb navigation"
        );
        toggleFAB(); // Close FAB menu
      }

      function bookmarkAction() {
        showDemoMessage("üîñ Bookmark - Save this optimal UI pattern");
        toggleFAB(); // Close FAB menu
      }

      function editAction() {
        showDemoMessage("‚úèÔ∏è Edit - Modify thumb zone preferences");
        toggleFAB(); // Close FAB menu
      }

      function moreAction() {
        showDemoMessage("‚ãØ More - Additional thumb-friendly options");
        toggleFAB(); // Close FAB menu
      }

      function notificationAction() {
        showDemoMessage("üîî Notifications - Check your alerts and updates");
        toggleFAB(); // Close FAB menu
      }

      function profileAction() {
        showDemoMessage("üë§ Profile - Manage your account and preferences");
        toggleFAB(); // Close FAB menu
      }

      function cameraAction() {
        showDemoMessage("üì∑ Camera - Capture moments with optimal reach");
        toggleFAB(); // Close FAB menu
      }

      function messageAction() {
        showDemoMessage("üí¨ Messages - Quick access to conversations");
        toggleFAB(); // Close FAB menu
      }

      function favoriteAction() {
        showDemoMessage("‚≠ê Favorites - Access your starred content");
        toggleFAB(); // Close FAB menu
      }

      function calendarAction() {
        showDemoMessage("üìÖ Calendar - View your schedule and events");
        toggleFAB(); // Close FAB menu
      }

      function locationAction() {
        showDemoMessage("üìç Location - Find places and get directions");
        toggleFAB(); // Close FAB menu
      }

      function showDemoMessage(message) {
        const overlay = document.getElementById("demoOverlay");
        const text = document.getElementById("demoText");

        overlay.classList.add("active");
        text.innerHTML = message;

        // Auto-hide after 3 seconds if not clicked
        setTimeout(() => {
          overlay.classList.remove("active");
        }, 3000);
      }

      function hideOverlay() {
        const overlay = document.getElementById("demoOverlay");
        overlay.classList.remove("active");
      }

      function toggleDemo() {
        showDemoMessage(
          "‚úã Primary actions are positioned in the natural thumb reach area"
        );
      }

      function showZone() {
        const thumbZone = document.querySelector(".thumb-zone");
        const indicator = document.querySelector(".zone-indicator");

        if (zoneVisible) {
          thumbZone.style.opacity = "0";
          indicator.style.opacity = "0";
          zoneVisible = false;
        } else {
          thumbZone.style.opacity = "1";
          indicator.style.opacity = "1";
          zoneVisible = true;
        }
      }

      function simulate() {
        showDemoMessage(
          "üöÄ Interface optimized for 85% of users' natural thumb reach"
        );
      }

      // Initialize positioning on load
      setTimeout(() => {
        positionFABActions();
        // Open FAB menu on page load
        toggleFAB();
      }, 100);
    </script>
  </body>
</html>
