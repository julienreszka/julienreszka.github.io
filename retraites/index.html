<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Calculateur Retraites France : R√©gimes ‚Äì Cotisations et Pensions ‚Äì
      Baby-Boomers vs Actifs
    </title>
    <meta
      name="description"
      content="Calculateur gratuit pour comparer les cotisations retraite et pensions entre g√©n√©rations baby-boomers et actifs selon les r√©gimes fran√ßais (priv√©, public, sp√©ciaux)."
    />
    <meta
      name="keywords"
      content="calculateur retraite, cotisations retraite France, pension retraite, baby-boomers, r√©gime g√©n√©ral, r√©gime public, r√©gime sp√©cial, simulation retraite"
    />
    <meta name="author" content="Julien Reszka" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="https://julienreszka.github.io/retraites/" />

    <!-- Open Graph tags -->
    <meta
      property="og:title"
      content="Calculateur Retraites France : R√©gimes Cotisations et Pensions"
    />
    <meta
      property="og:description"
      content="Calculateur gratuit pour comparer les cotisations retraite et pensions selon les r√©gimes fran√ßais."
    />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://julienreszka.github.io/retraites/"
    />
    <meta property="og:locale" content="fr_FR" />

    <!-- Twitter Card tags -->
    <meta name="twitter:card" content="summary" />
    <meta
      name="twitter:title"
      content="Calculateur Retraites France : R√©gimes Cotisations et Pensions"
    />
    <meta
      name="twitter:description"
      content="Comparateur retraite baby-boomers vs actifs, selon r√©gime g√©n√©ral, public ou sp√©cial."
    />

    <!-- JSON-LD -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Calculateur Retraites France",
        "description": "Calculateur comparant les cotisations retraite et pensions par r√©gime (priv√©, public, sp√©cial)",
        "url": "https://julienreszka.github.io/retraites/",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Web",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "EUR"
        },
        "author": {
          "@type": "Person",
          "name": "Julien Reszka"
        },
        "inLanguage": "fr"
      }
    </script>
    <style>
      body {
        font-family: "Georgia", serif;
        background: #f4e8d1;
        color: #2c1810;
        margin: 0;
        padding: 10px;
        font-size: 14px;
      }
      h1 {
        text-align: center;
        color: #8b0000;
        border-bottom: 1px solid #8b0000;
        padding-bottom: 5px;
        margin-bottom: 10px;
        font-size: 18px;
      }
      form {
        max-width: 530px;
        margin: 0 auto;
        background: #fff;
        padding: 10px;
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      label {
        display: block;
        margin: 5px 0 2px;
        font-weight: bold;
        font-size: 12px;
      }
      input,
      select {
        width: 100%;
        padding: 4px;
        margin-bottom: 5px;
        border: 1px solid #ccc;
        border-radius: 3px;
        font-size: 14px;
      }
      #results {
        max-width: 600px;
        margin: 10px auto 0;
        padding: 15px;
        background: #f9f5e7;
        border-radius: 5px;
        font-size: 12px;
      }
      .main-comparison-table {
        background: white;
        border-radius: 8px;
        padding: 20px;
        border: 1px solid #ddd;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        margin-bottom: 20px;
      }
      .main-comparison-table h3 {
        text-align: center;
        color: #8b0000;
        margin-bottom: 20px;
        font-size: 16px;
        border-bottom: 2px solid #8b0000;
        padding-bottom: 10px;
      }
      .main-comparison-table table {
        width: 100%;
        border-collapse: collapse;
        font-size: 12px;
      }
      .main-comparison-table th {
        background: #f8f8f8;
        padding: 12px 8px;
        border: 1px solid #ddd;
        font-weight: bold;
        text-align: center;
        color: #333;
      }
      .main-comparison-table td {
        padding: 10px 8px;
        border: 1px solid #ddd;
        text-align: center;
      }
      .regime-header {
        font-weight: bold;
        font-size: 13px;
        padding: 12px 8px !important;
        background: #f5f5f5 !important;
        color: #333 !important;
        border-left: 3px solid #8b0000 !important;
      }
      .metric-primary {
        background: #f0f0f0 !important;
        font-weight: bold;
      }
      .metric-secondary {
        background: #f8f8f8 !important;
      }
      .best-value {
        background: #e8f5e8 !important;
        font-weight: bold;
        color: #2e7d32;
      }
      .worst-value {
        background: #ffebee !important;
        font-weight: bold;
        color: #c62828;
      }
      .result-item {
        margin: 5px 0;
        padding: 5px;
        background: #f9f9f9;
        border-left: 3px solid #8b0000;
        font-size: 11px;
      }
      .regime-details {
        margin-top: 15px;
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 15px;
      }
      .regime-detail-card {
        background: white;
        border-radius: 5px;
        padding: 15px;
        border: 1px solid #ddd;
        font-size: 11px;
      }
      .regime-detail-card h4 {
        margin: 0 0 10px 0;
        font-size: 12px;
        text-align: center;
        padding: 8px;
        border-radius: 3px;
      }
      .regime-detail-card .description {
        font-size: 10px;
        color: #666;
        text-align: center;
        line-height: 1.3;
      }
      .regime-detail-card.prive h4 {
        background: #e3f2fd;
        color: #1976d2;
      }
      .regime-detail-card.public h4 {
        background: #f3e5f5;
        color: #7b1fa2;
      }
      .regime-detail-card.special h4 {
        background: #fff3e0;
        color: #f57c00;
      }
      .warning {
        color: #8b0000;
        font-style: italic;
        text-align: center;
        font-size: 11px;
        margin: 5px 0;
      }

      /* Sources section styles */
      #sources {
        max-width: 540px;
        margin: 0 auto 10px;
        margin-top: 20px;
        font-size: 11px;
        background: linear-gradient(135deg, #f5e3e2 0%, #f0d8d7 100%);
        border-radius: 8px;
        padding: 15px 20px;
        border: 1px solid #e0c5c4;
        box-shadow: 0 2px 6px rgba(139, 0, 0, 0.08);
      }

      #sources strong {
        color: #8b0000;
        font-size: 12px;
        display: block;
        margin-bottom: 8px;
        border-bottom: 1px solid #e0c5c4;
        padding-bottom: 4px;
      }

      #sources ul {
        margin: 8px 0 12px 0;
        padding: 0;
        list-style: none;
      }

      #sources li {
        margin: 6px 0;
        padding: 6px 0 6px 20px;
        position: relative;
        border-left: 2px solid transparent;
        transition: all 0.2s ease;
      }

      #sources li:hover {
        border-left-color: #8b0000;
        background: rgba(255, 255, 255, 0.5);
        padding-left: 24px;
      }

      #sources li::before {
        content: "üìÑ";
        position: absolute;
        left: 0;
        top: 6px;
        font-size: 10px;
      }

      #sources a {
        color: #5d4037;
        text-decoration: none;
        font-weight: 500;
        transition: color 0.2s ease;
      }

      #sources a:hover {
        color: #8b0000;
        text-decoration: underline;
      }

      #sources a:visited {
        color: #6d4c41;
      }

      #sources p {
        margin: 8px 0 0 0;
        font-style: italic;
        color: #795548;
        font-size: 10px;
        text-align: center;
        padding-top: 8px;
        border-top: 1px solid #e8d1d0;
      }

      /* Dark mode styles */
      @media (prefers-color-scheme: dark) {
        body {
          background: #1a1a1a;
          color: #e0e0e0;
        }
        h1 {
          color: #ff6b6b;
          border-bottom-color: #ff6b6b;
        }
        form {
          background: #2d2d2d;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        input,
        select {
          background: #3d3d3d;
          color: #e0e0e0;
          border-color: #555;
        }
        input:focus,
        select:focus {
          border-color: #ff6b6b;
          outline: none;
        }
        #results {
          background: #2a2a2a;
        }
        .result-item {
          background: #3d3d3d;
          border-left-color: #ff6b6b;
          color: #e0e0e0;
        }
        .warning {
          color: #ff6b6b;
        }
        small,
        footer {
          color: #aaa !important;
        }

        /* Dark mode sources styles */
        #sources {
          background: linear-gradient(135deg, #2a1f1f 0%, #3d2c2c 100%);
          border-color: #4a3535;
          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        }

        #sources strong {
          color: #ff6b6b;
          border-bottom-color: #4a3535;
        }

        #sources li:hover {
          border-left-color: #ff6b6b;
          background: rgba(255, 107, 107, 0.1);
        }

        #sources a {
          color: #d7b899;
        }

        #sources a:hover {
          color: #ff6b6b;
        }

        #sources a:visited {
          color: #c4a484;
        }

        #sources p {
          color: #999;
          border-top-color: #4a3535;
        }

        /* Dark mode regime sections */
        .main-comparison-table {
          background: #2d2d2d;
          border-color: #555;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
        }
        .main-comparison-table h3 {
          color: #ff6b6b;
          border-bottom-color: #ff6b6b;
        }
        .main-comparison-table th {
          background: #404040;
          color: #f0f0f0;
          border-color: #555;
        }
        .main-comparison-table td {
          color: #e0e0e0;
          border-color: #555;
          background: #383838;
        }
        .main-comparison-table .regime-header {
          background: #555 !important;
          color: #f0f0f0 !important;
          border-left: 3px solid #ff6b6b !important;
        }
        .main-comparison-table .metric-primary {
          background: #4a4a4a !important;
          color: #f0f0f0 !important;
        }
        .main-comparison-table .metric-secondary {
          background: #454545 !important;
          color: #e0e0e0 !important;
        }
        .regime-header.prive {
          background: #1e3a5f;
          color: #64b5f6;
        }
        .regime-header.public {
          background: #3e2c4a;
          color: #ba68c8;
        }
        .regime-header.special {
          background: #4a3429;
          color: #ffb74d;
        }
        .best-value {
          background: #2e5a2e !important;
          color: #a5d6a7 !important;
          border: 1px solid #4caf50 !important;
        }
        .worst-value {
          background: #5a2e2e !important;
          color: #ef9a9a !important;
          border: 1px solid #f44336 !important;
        }
        .regime-detail-card {
          background: #3d3d3d;
          border-color: #555;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        .regime-detail-card .description {
          color: #bbb;
        }
        .regime-detail-card.prive h4 {
          background: #1e3a5f;
          color: #64b5f6;
        }
        .regime-detail-card.public h4 {
          background: #3e2c4a;
          color: #ba68c8;
        }
        .regime-detail-card.special h4 {
          background: #4a3429;
          color: #ffb74d;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <h1>
        Calculateur Retraites France : R√©gimes ‚Äì Cotisations et Pensions ‚Äì
        Baby-Boomers vs Actifs
      </h1>
      <p class="warning">
        Choisissez votre r√©gime : priv√©, public ou sp√©cial.<br />
        R√®gles : 2025 (28% brut, superbrut x1.42) ; 1980 (13% brut, x1.35).
        Public: pension sur dernier traitement, priv√©: sur salaire moyen,
        sp√©cial: r√®gles particuli√®res.<br />
        Pension de base = taux x salaire de r√©f√©rence x (trimestres obtenus /
        requis).
      </p>
    </header>
    <main>
      <section id="calculator">
        <form
          id="calcForm"
          role="form"
          aria-label="Formulaire de calcul des droits retraite"
        >
          <label for="regime">Mode d'affichage :</label>
          <select id="regime" aria-describedby="regime-help">
            <option value="all">Comparer tous les r√©gimes</option>
            <option value="prive">Priv√© uniquement (CNAV + Agirc-Arrco)</option>
            <option value="public">Public uniquement (CNRACL, √âtat)</option>
            <option value="special">Sp√©cial uniquement (SNCF, RATP...)</option>
          </select>
          <small id="regime-help" style="font-size: 10px; color: #666">
            S√©lectionnez pour comparer tous les r√©gimes ou voir un seul
          </small>

          <label for="salaireBrut">Salaire brut mensuel (‚Ç¨) :</label>
          <input
            type="number"
            id="salaireBrut"
            value="3000"
            min="1000"
            step="100"
            required
            aria-describedby="salaire-help"
          />
          <small id="salaire-help" style="font-size: 10px; color: #666"
            >Salaire brut mensuel estim√©</small
          >

          <label for="anneesBoomer">Annuit√©s boomer (ann√©es) :</label>
          <input
            type="number"
            id="anneesBoomer"
            value="41"
            min="30"
            max="45"
            required
            aria-describedby="boomer-help"
          />
          <small id="boomer-help" style="font-size: 10px; color: #666"
            >Ann√©es de cotisation de la g√©n√©ration baby-boomer</small
          >

          <label for="anneesVous">Vos annuit√©s (ann√©es) :</label>
          <input
            type="number"
            id="anneesVous"
            value="43"
            min="30"
            max="45"
            required
            aria-describedby="vous-help"
          />
          <small id="vous-help" style="font-size: 10px; color: #666"
            >Vos ann√©es de cotisation pr√©vues</small
          >

          <label for="generationBoomer">Boomer (naissance) :</label>
          <select id="generationBoomer" aria-describedby="gen-boomer-help">
            <option value="1955">1955 (166 trim.)</option>
            <option value="1960">1960 (170 trim.)</option>
          </select>
          <small id="gen-boomer-help" style="font-size: 10px; color: #666"
            >Ann√©e de naissance du baby-boomer</small
          >

          <label for="generationVous">Vous (naissance) :</label>
          <select id="generationVous" aria-describedby="gen-vous-help">
            <option value="1990">1990 (172 trim.)</option>
            <option value="2000">2000 (172 trim.)</option>
          </select>
          <small id="gen-vous-help" style="font-size: 10px; color: #666"
            >Votre ann√©e de naissance</small
          >
        </form>
        <section
          id="results"
          role="region"
          aria-live="polite"
          aria-label="R√©sultats du calcul"
        ></section>
      </section>
    </main>
    <section id="sources">
      <strong>Sources officielles :</strong>
      <ul>
        <li>
          <a
            href="https://www.service-public.fr/particuliers/vosdroits/N144"
            target="_blank"
            rel="noopener"
            >R√®gles r√©gime g√©n√©ral CNAV (service-public.fr)</a
          >
        </li>
        <li>
          <a
            href="https://www.agirc-arrco.fr/particuliers/comprendre-la-retraite-complementaire/calcul-points/"
            target="_blank"
            rel="noopener"
            >Syst√®me compl√©mentaire Agirc-Arrco</a
          >
        </li>
        <li>
          <a
            href="https://www.cdc.retraites.fr/particuliers/ma-retraite/la-retraite-des-fonctionnaires/mon-calcul-de-retraite"
            target="_blank"
            rel="noopener"
            >Calcul retraite fonction publique (CNRACL/CDG)</a
          >
        </li>
        <li>
          <a
            href="https://fr.wikipedia.org/wiki/R%C3%A9gimes_sp%C3%A9ciaux_de_retraite"
            target="_blank"
            rel="noopener"
            >R√©gimes sp√©ciaux d√©tail (Wikipedia)</a
          >
        </li>
        <li>
          <a
            href="https://www.insee.fr/fr/statistiques/2381474"
            target="_blank"
            rel="noopener"
            >Donn√©es INSEE‚ÄØ: taux cotisation, esp√©rance de vie</a
          >
        </li>
        <li>
          <a
            href="https://www2.assemblee-nationale.fr/static/rapport_retraites_2023.pdf"
            target="_blank"
            rel="noopener"
            >Rapport retraite Assembl√©e nationale (2023-2024)</a
          >
        </li>
      </ul>
      <p>
        Simulateur simplifi√© pour l'illustration ‚Äì voir chaque r√©gime pour les
        d√©tails complets.
      </p>
    </section>

    <footer
      style="text-align: center; margin-top: 20px; font-size: 11px; color: #666"
    >
      <p>
        Comparaison interg√©n√©rationnelle selon les principaux r√©gimes retrait√©s
        fran√ßais
      </p>
      <p>
        Donn√©es simul√©es, simplifi√©es - r√®gles CNAV, CNRACL, r√©gimes sp√©ciaux
        pour estimation
      </p>
    </footer>
    <script>
      function calculateRegime(
        regimeType,
        salaireMensuel,
        anneesBoomer,
        anneesVous,
        genBoomer,
        genVous
      ) {
        // Trimestres requis
        const requisBoomer =
          genBoomer <= 1957 ? 160 : genBoomer <= 1960 ? 166 : 170;
        const requisVous = genVous >= 1973 ? 172 : 166;

        // Bar√®mes cotisation + superbrut par √©poque
        let tauxRetraite2025Brut = 0.28,
          multiplicateurSuperbrut2025 = 1.42;
        let tauxRetraite1980Brut = 0.13,
          multiplicateurSuperbrut1980 = 1.35;

        // Ajustements par r√©gime
        let tauxPensionBase = 0.5; // taux plein
        let salaireReferenceBoomer, salaireReferenceVous;
        let noteRegime = "";
        let regimeName = "";

        if (regimeType === "prive") {
          regimeName = "Priv√© (CNAV + Agirc-Arrco)";
          salaireReferenceBoomer = salaireMensuel * 12;
          salaireReferenceVous = salaireMensuel * 12;
          noteRegime = "Pension sur salaire moyen de carri√®re, taux plein 50%";
        } else if (regimeType === "public") {
          regimeName = "Public (CNRACL, √âtat)";
          salaireReferenceBoomer = salaireMensuel * 12 * 1.15;
          salaireReferenceVous = salaireMensuel * 12 * 1.15;
          tauxPensionBase = 0.75;
          noteRegime = "Pension sur dernier traitement (+15%), taux plein 75%";
        } else if (regimeType === "special") {
          regimeName = "Sp√©cial (SNCF, RATP...)";
          salaireReferenceBoomer = salaireMensuel * 12 * 1.25;
          salaireReferenceVous = salaireMensuel * 12 * 1.25;
          tauxPensionBase = 0.8;
          noteRegime =
            "Pension sur dernier salaire major√© (+25%), taux plein 80%";
        }

        const trimestresBoomer = anneesBoomer * 4;
        const trimestresVous = anneesVous * 4;

        // Pension annuelle et mensuelle
        const tauxPensionBoomer =
          tauxPensionBase * (trimestresBoomer / requisBoomer);
        const tauxPensionVous = tauxPensionBase * (trimestresVous / requisVous);
        const pensionBoomerAnnuel = salaireReferenceBoomer * tauxPensionBoomer;
        const pensionBoomerMensuel = pensionBoomerAnnuel / 12;
        const pensionVousAnnuel = salaireReferenceVous * tauxPensionVous;
        const pensionVousMensuel = pensionVousAnnuel / 12;

        // Cotisations
        const salaireAnnuel = salaireMensuel * 12;
        const cotisationsBoomerTotales =
          salaireAnnuel * tauxRetraite1980Brut * anneesBoomer;
        const cotisationsVousTotales =
          salaireAnnuel * tauxRetraite2025Brut * anneesVous;

        // Ann√©e de d√©part et esp√©rance vie
        const ageRetraiteBoomer =
          regimeType === "special" ? 57 : regimeType === "public" ? 62 : 62;
        const ageRetraiteVous =
          regimeType === "special" ? 60 : regimeType === "public" ? 64 : 64;
        const esperanceVieBoomer = regimeType === "special" ? 78 : 82;
        const esperanceVieVous = regimeType === "special" ? 82 : 85;

        const anneesRetraiteBoomer = esperanceVieBoomer - ageRetraiteBoomer;
        const anneesRetraiteVous = esperanceVieVous - ageRetraiteVous;
        const pensionsRecuesBoomer = pensionBoomerAnnuel * anneesRetraiteBoomer;
        const pensionsRecuesVous = pensionVousAnnuel * anneesRetraiteVous;

        const ratioRecuperationBoomer =
          pensionsRecuesBoomer / cotisationsBoomerTotales;
        const ratioRecuperationVous =
          pensionsRecuesVous / cotisationsVousTotales;

        return {
          regimeType,
          regimeName,
          noteRegime,
          pensionBoomerMensuel,
          pensionVousMensuel,
          tauxPensionBoomer,
          tauxPensionVous,
          trimestresBoomer,
          trimestresVous,
          requisBoomer,
          requisVous,
          cotisationsBoomerTotales,
          cotisationsVousTotales,
          pensionsRecuesBoomer,
          pensionsRecuesVous,
          ratioRecuperationBoomer,
          ratioRecuperationVous,
          anneesBoomer,
          anneesVous,
        };
      }

      function displaySingleRegime(result) {
        return `
          <div class="result-item"><strong>R√©gime :</strong> ${
            result.noteRegime
          }</div>
          <div class="result-item"><strong>Pension boomer :</strong> ${result.pensionBoomerMensuel.toFixed(
            0
          )}‚Ç¨/mois (${(result.tauxPensionBoomer * 100).toFixed(1)}% ; ${
          result.anneesBoomer
        } ans, ${result.requisBoomer} trim.)</div>
          <div class="result-item"><strong>Votre pension :</strong> ${result.pensionVousMensuel.toFixed(
            0
          )}‚Ç¨/mois (${(result.tauxPensionVous * 100).toFixed(1)}% ; ${
          result.anneesVous
        } ans, ${result.requisVous} trim.)</div>
          <div class="result-item"><strong>Trimestres :</strong> Boomers ${
            result.trimestresBoomer
          } vs Vous ${result.trimestresVous}</div>
          <div class="result-item"><strong>Cotisations totales :</strong> Boomers ${(
            result.cotisationsBoomerTotales / 1000
          ).toFixed(0)}k‚Ç¨ vs Vous ${(
          result.cotisationsVousTotales / 1000
        ).toFixed(0)}k‚Ç¨</div>
          <div class="result-item"><strong>Pensions totales estim√©es :</strong> Boomers ${(
            result.pensionsRecuesBoomer / 1000
          ).toFixed(0)}k‚Ç¨ vs Vous ${(result.pensionsRecuesVous / 1000).toFixed(
          0
        )}k‚Ç¨</div>
          <p class="warning">Ratio retrait√©/cotisant ‚Äî Boomers : ${result.ratioRecuperationBoomer.toFixed(
            1
          )}x ; Vous : ${result.ratioRecuperationVous.toFixed(1)}x.</p>
        `;
      }

      function displayRegimeSection(result, isBest, isWorst) {
        return `
          <div class="regime-detail-card ${result.regimeType}">
            <h4>${result.regimeName}</h4>
            <div class="description">
              ${result.noteRegime}
            </div>
          </div>
        `;
      }

      function createMainComparisonTable(results) {
        const bestPensionVous = Math.max(
          ...results.map((r) => r.pensionVousMensuel)
        );
        const worstPensionVous = Math.min(
          ...results.map((r) => r.pensionVousMensuel)
        );
        const bestPensionBoomer = Math.max(
          ...results.map((r) => r.pensionBoomerMensuel)
        );
        const worstPensionBoomer = Math.min(
          ...results.map((r) => r.pensionBoomerMensuel)
        );
        const bestRatioVous = Math.max(
          ...results.map((r) => r.ratioRecuperationVous)
        );
        const worstRatioVous = Math.min(
          ...results.map((r) => r.ratioRecuperationVous)
        );
        const bestRatioBoomer = Math.max(
          ...results.map((r) => r.ratioRecuperationBoomer)
        );
        const worstRatioBoomer = Math.min(
          ...results.map((r) => r.ratioRecuperationBoomer)
        );

        return `
          <div class="main-comparison-table">
            <h3>Comparaison des 3 r√©gimes de retraite</h3>
            <table>
              <thead>
                <tr>
                  <th style="width: 20%;">M√©trique</th>
                  <th style="width: 20%;">Priv√© (CNAV)</th>
                  <th style="width: 20%;">Public (CNRACL)</th>
                  <th style="width: 20%;">Sp√©cial (SNCF/RATP)</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="regime-header metric-primary">
                    <strong>Votre pension mensuelle</strong>
                  </td>
                  ${results
                    .map(
                      (r) => `
                    <td class="${
                      r.pensionVousMensuel === bestPensionVous
                        ? "best-value"
                        : r.pensionVousMensuel === worstPensionVous
                        ? "worst-value"
                        : ""
                    }">
                      <strong>${r.pensionVousMensuel.toFixed(0)}‚Ç¨</strong><br>
                      <small style="color: #666;">(${(
                        r.tauxPensionVous * 100
                      ).toFixed(1)}%)</small>
                    </td>
                  `
                    )
                    .join("")}
                </tr>
                <tr>
                  <td class="regime-header metric-secondary">
                    <strong>Pension boomer mensuelle</strong>
                  </td>
                  ${results
                    .map(
                      (r) => `
                    <td class="${
                      r.pensionBoomerMensuel === bestPensionBoomer
                        ? "best-value"
                        : r.pensionBoomerMensuel === worstPensionBoomer
                        ? "worst-value"
                        : ""
                    }">
                      <strong>${r.pensionBoomerMensuel.toFixed(0)}‚Ç¨</strong><br>
                      <small style="color: #666;">(${(
                        r.tauxPensionBoomer * 100
                      ).toFixed(1)}%)</small>
                    </td>
                  `
                    )
                    .join("")}
                </tr>
                <tr>
                  <td class="regime-header metric-secondary">
                    <strong>Trimestres requis</strong>
                  </td>
                  ${results
                    .map(
                      (r) => `
                    <td>
                      Boomers: ${r.requisBoomer}<br>
                      Vous: ${r.requisVous}
                    </td>
                  `
                    )
                    .join("")}
                </tr>
                <tr>
                  <td class="regime-header metric-secondary">
                    <strong>Vos cotisations totales</strong>
                  </td>
                  ${results
                    .map(
                      (r) => `
                    <td>
                      <strong>${(r.cotisationsVousTotales / 1000).toFixed(
                        0
                      )}k‚Ç¨</strong><br>
                      <small style="color: #666;">(${r.anneesVous} ans)</small>
                    </td>
                  `
                    )
                    .join("")}
                </tr>
                <tr>
                  <td class="regime-header metric-secondary">
                    <strong>Vos pensions totales</strong>
                  </td>
                  ${results
                    .map(
                      (r) => `
                    <td>
                      <strong>${(r.pensionsRecuesVous / 1000).toFixed(
                        0
                      )}k‚Ç¨</strong>
                    </td>
                  `
                    )
                    .join("")}
                </tr>
                <tr>
                  <td class="regime-header metric-primary">
                    <strong>Votre ratio retour/cotis√©</strong>
                  </td>
                  ${results
                    .map(
                      (r) => `
                    <td class="${
                      r.ratioRecuperationVous === bestRatioVous
                        ? "best-value"
                        : r.ratioRecuperationVous === worstRatioVous
                        ? "worst-value"
                        : ""
                    }">
                      <strong>${r.ratioRecuperationVous.toFixed(1)}x</strong>
                    </td>
                  `
                    )
                    .join("")}
                </tr>
                <tr>
                  <td class="regime-header metric-secondary">
                    <strong>Ratio boomer</strong>
                  </td>
                  ${results
                    .map(
                      (r) => `
                    <td class="${
                      r.ratioRecuperationBoomer === bestRatioBoomer
                        ? "best-value"
                        : r.ratioRecuperationBoomer === worstRatioBoomer
                        ? "worst-value"
                        : ""
                    }">
                      <strong>${r.ratioRecuperationBoomer.toFixed(1)}x</strong>
                    </td>
                  `
                    )
                    .join("")}
                </tr>
              </tbody>
            </table>
            <p style="font-size: 11px; color: #666; text-align: center; margin-top: 15px;">
              üü¢ <strong>Meilleures valeurs</strong> | üî¥ <strong>Moins bonnes valeurs</strong> | 
              Ratios = total per√ßu / total cotis√©
            </p>
          </div>
        `;
      }

      function createSummaryTable(results) {
        return `
          <div class="regime-details">
            ${results.map((result) => displayRegimeSection(result)).join("")}
          </div>
        `;
      }

      function calculate() {
        const selectedRegime = document.getElementById("regime").value;
        const salaireMensuel =
          parseFloat(document.getElementById("salaireBrut").value) || 0;
        const anneesBoomer =
          parseInt(document.getElementById("anneesBoomer").value) || 0;
        const anneesVous =
          parseInt(document.getElementById("anneesVous").value) || 0;
        const genBoomer =
          parseInt(document.getElementById("generationBoomer").value) || 1955;
        const genVous =
          parseInt(document.getElementById("generationVous").value) || 1990;

        if (salaireMensuel === 0 || anneesBoomer === 0 || anneesVous === 0) {
          document.getElementById("results").innerHTML =
            '<p class="warning">Saisissez des valeurs.</p>';
          return;
        }

        const results = document.getElementById("results");

        if (selectedRegime === "all") {
          // Calculate all 3 regimes
          const regimeResults = ["prive", "public", "special"].map((regime) =>
            calculateRegime(
              regime,
              salaireMensuel,
              anneesBoomer,
              anneesVous,
              genBoomer,
              genVous
            )
          );

          const comparisonHtml = `
            ${createMainComparisonTable(regimeResults)}
            ${createSummaryTable(regimeResults)}
          `;

          results.innerHTML = comparisonHtml;
        } else {
          // Calculate single regime
          const result = calculateRegime(
            selectedRegime,
            salaireMensuel,
            anneesBoomer,
            anneesVous,
            genBoomer,
            genVous
          );
          results.innerHTML = displaySingleRegime(result);
        }
      }

      const inputs = document.querySelectorAll(
        "#calcForm input, #calcForm select"
      );
      inputs.forEach((input) => {
        input.addEventListener("input", calculate);
        input.addEventListener("change", calculate);
      });
      calculate();
    </script>
  </body>
</html>
