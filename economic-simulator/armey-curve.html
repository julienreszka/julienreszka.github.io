<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Armey Curve: The Right to Economic Growth | Economic Simulator
    </title>

    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="Interactive Armey Curve simulator. Explore government spending vs economic growth and the Right to Economic Growth."
    />
    <meta
      name="keywords"
      content="Armey curve, government spending, economic growth, fiscal policy, public economics, optimal government size, interactive simulator, responsive design"
    />
    <meta name="author" content="Julien Reszka" />
    <meta name="robots" content="index, follow" />
    <meta name="theme-color" content="#007bff" />

    <!-- Open Graph -->
    <meta
      property="og:title"
      content="Armey Curve: The Right to Economic Growth | Interactive Simulator"
    />
    <meta
      property="og:description"
      content="Interactive simulator exploring government spending vs economic growth and the natural right to economic growth with modern, clean interface."
    />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://julienreszka.github.io/economic-simulator/armey-curve.html"
    />
    <meta
      property="og:image"
      content="https://julienreszka.github.io/economic-simulator/armey-curve-preview.png"
    />
    <meta property="og:site_name" content="Economic Curves Simulator" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Armey Curve: The Right to Economic Growth"
    />
    <meta
      name="twitter:description"
      content="Interactive simulator exploring government spending vs economic growth. Modern design."
    />
    <meta name="twitter:creator" content="@julienreszka" />

    <!-- Canonical URL -->
    <link
      rel="canonical"
      href="https://julienreszka.github.io/economic-simulator/armey-curve.html"
    />

    <!-- Shared Styles -->
    <link rel="stylesheet" href="shared-styles.css" />

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
      .armey-specific {
      }

      .armey-specific h3 {
        color: #007bff !important;
      }

      .help-text {
        color: #666;
        font-style: italic;
        font-size: 0.9em;
      }
    </style>
  </head>

  <body>
    <div id="container">
      <!-- Navigation Breadcrumb -->
      <nav class="nav-breadcrumb" aria-label="Breadcrumb">
        <a href="index.html">← Back to All Curves</a>
      </nav>

      <h1>The Armey Curve: Government Spending vs Economic Growth</h1>

      <p>
        <strong>Challenging the Armey Curve:</strong> For decades, economists
        have claimed there's an "optimal" level of government spending that
        maximizes economic growth. But when you look at the real data, this
        theory falls apart. This interactive simulator lets you compare the
        traditional Armey curve against what the data actually shows - and the
        results are surprising.
      </p>

      <!-- Interactive Simulation -->
      <section id="armey-section">
        <h2>Interactive Armey Curve Simulator</h2>

        <form id="paramsFormArmey">
          <div class="param-group">
            <label for="curve-type-select">Curve Model Type:</label>
            <select id="curve-type-select" aria-describedby="curve-type-help">
              <option value="quadratic" selected>
                Quadratic (Traditional Armey)
              </option>
              <option value="linear">Linear Decline</option>
              <option value="inverse">Inverse (1/x decline)</option>
              <option value="exponential">Exponential Decay</option>
            </select>
            <small id="curve-type-help" class="help-text">
              Quadratic shows diminishing returns; Linear shows constant slope
              relationship
            </small>
          </div>

          <div class="param-group">
            <label for="beta0-armey"
              >Intercept (β₀, base growth, e.g., 2):</label
            >
            <input
              type="number"
              id="beta0-armey"
              value="2"
              step="0.1"
              min="0"
              max="20"
              aria-describedby="beta0-armey-help"
            />
            <small id="beta0-armey-help" class="sr-only"
              >Natural growth rate without government intervention</small
            >
          </div>

          <div class="param-group" id="beta1-group">
            <label for="beta1-armey"
              >Linear coefficient (β₁, positive, e.g., 0.5):</label
            >
            <input
              type="number"
              id="beta1-armey"
              value="0.5"
              step="0.1"
              min="0"
              max="2"
              aria-describedby="beta1-armey-help"
            />
            <small id="beta1-armey-help" class="sr-only"
              >Initial positive effect of government spending</small
            >
          </div>

          <div class="param-group" id="beta2-group">
            <label for="beta2-armey"
              >Quadratic coefficient (β₂, negative, e.g., -0.01):</label
            >
            <input
              type="number"
              id="beta2-armey"
              value="-0.01"
              step="0.001"
              max="0"
              min="-0.1"
              aria-describedby="beta2-armey-help"
            />
            <small id="beta2-armey-help" class="sr-only"
              >Diminishing returns effect (must be negative)</small
            >
          </div>

          <div
            class="param-group"
            id="linear-slope-group"
            style="display: none"
          >
            <label for="linear-slope">Linear slope (e.g., -0.3):</label>
            <input
              type="number"
              id="linear-slope"
              value="-0.3"
              step="0.01"
              min="-1"
              max="1"
              aria-describedby="linear-slope-help"
            />
            <small id="linear-slope-help" class="sr-only"
              >Rate of change in growth per percentage point of government
              spending (can be positive or negative)</small
            >
          </div>

          <div class="param-group" id="inverse-group" style="display: none">
            <label for="inverse-strength">Inverse strength (e.g., 50):</label>
            <input
              type="number"
              id="inverse-strength"
              value="50"
              step="1"
              min="1"
              max="200"
              aria-describedby="inverse-strength-help"
            />
            <small id="inverse-strength-help" class="sr-only"
              >Controls how fast growth declines with spending: growth =
              intercept - strength/(spending+1)</small
            >
          </div>

          <div class="param-group" id="exponential-group" style="display: none">
            <label for="exp-decay">Decay rate (e.g., 0.3):</label>
            <input
              type="number"
              id="exp-decay"
              value="0.3"
              step="0.001"
              min="0.001"
              max="1"
              aria-describedby="exp-decay-help"
            />
            <small id="exp-decay-help" class="sr-only"
              >Exponential decay rate: growth = intercept * e^(-decay *
              spending)</small
            >
          </div>
        </form>

        <div class="param-group">
          <label for="country-select">Show Real Country Data:</label>
          <select id="country-select" aria-describedby="country-select-help">
            <option value="all">All Countries</option>
            <option value="developed">Developed Countries</option>
            <option value="developing">Developing Countries</option>
            <option value="none">Hide Country Data</option>
          </select>
          <small id="country-select-help" class="help-text"
            >Real-world data from
            <a
              href="https://data.worldbank.org/indicator/GC.XPN.TOTL.GD.ZS"
              target="_blank"
              rel="noopener"
              >World Bank API</a
            >
            (<a
              href="https://data.worldbank.org/indicator/GC.XPN.TOTL.GD.ZS"
              target="_blank"
              rel="noopener"
              >Government expenditure</a
            >
            &
            <a
              href="https://data.worldbank.org/indicator/NY.GDP.MKTP.KD.ZG"
              target="_blank"
              rel="noopener"
              >GDP growth</a
            >)</small
          >
        </div>

        <div class="param-group">
          <label for="time-period-select">Time Period for Averaging:</label>
          <select id="time-period-select" aria-describedby="time-period-help">
            <option value="recent">
              Recent (2018-2023) - Post-crisis stability
            </option>
            <option value="decade" selected>
              Decade (2014-2023) - Full business cycle
            </option>
            <option value="long">
              Long-term (2010-2023) - Including financial crisis
            </option>
            <option value="structural">
              Structural (2005-2023) - Long-term trends
            </option>
          </select>
          <small id="time-period-help" class="help-text"
            >Longer periods smooth volatility but may include outdated
            regimes</small
          >
          <div
            id="data-status"
            class="help-text"
            style="margin-top: 5px; font-weight: bold"
          >
            Loading...
          </div>
        </div>

        <div class="param-group">
          <label for="highlight-country-select"
            >Highlight Specific Country:</label
          >
          <select
            id="highlight-country-select"
            aria-describedby="highlight-country-help"
          >
            <option value="none">No country highlighted</option>
          </select>
          <small id="highlight-country-help" class="help-text"
            >Select a country to highlight with a red dot</small
          >
        </div>

        <div
          class="chart-container"
          role="img"
          aria-labelledby="armey-chart-label"
        >
          <canvas
            id="growthChartArmey"
            aria-label="Interactive Armey Curve showing relationship between government spending and economic growth"
          ></canvas>
          <div id="armey-chart-label" class="sr-only">
            Chart displaying the Armey Curve with government spending on x-axis
            and GDP growth rate on y-axis
          </div>
        </div>

        <div
          id="optimal-armey"
          class="results-display"
          aria-live="polite"
        ></div>
      </section>

      <!-- Detailed Explanation -->
      <section>
        <h2>The Armey Curve Theory vs. Reality</h2>

        <div style="margin-top: 15px; line-height: 1.6">
          <p>
            <strong>The theory seemed reasonable:</strong> The Armey Curve
            suggested an inverted U-shaped relationship between government
            spending and economic growth. Named after economist Richard Armey,
            this curve claimed there exists an optimal level of government
            spending that maximizes economic growth.
          </p>

          <p>
            <strong>But here's the problem:</strong> When you actually look at
            real-world data from dozens of countries over multiple decades, the
            theory doesn't hold up. Countries with lower government spending
            consistently achieve higher growth rates, while high-spending
            countries cluster in the low-growth zone.
          </p>

          <p>
            <strong>What the data actually shows:</strong> Instead of a neat
            U-shaped curve with an "optimal" government size around 20-30% of
            GDP, we see patterns that better fit inverse (1/x) or exponential
            decay models - suggesting that <em>any</em> government spending
            beyond the absolute minimum reduces economic growth.
          </p>

          <h3>What the Traditional Theory Claimed</h3>
          <p>The Armey Curve theory proposed three distinct phases:</p>
          <ul>
            <li>
              <strong>Rising Phase (0-20%):</strong> Government spending
              supposedly provides essential infrastructure, legal framework, and
              public goods that enhance productivity and growth
            </li>
            <li>
              <strong>Peak (20-30%):</strong> The mythical "optimal" government
              size where growth is supposedly maximized
            </li>
            <li>
              <strong>Declining Phase (30%+):</strong> Excessive spending
              creates inefficiencies, crowds out private investment, and reduces
              growth through higher taxes and regulatory burden
            </li>
          </ul>

          <h3>What the Data Actually Shows</h3>
          <p>
            <strong>There is no "rising phase."</strong> Countries with minimal
            government spending (Singapore ~17%, historically Hong Kong ~15%)
            consistently achieve solid growth. Meanwhile, countries that spend
            30-45% of GDP (most of Europe) cluster in the low-growth zone
            (0.5-1.5%).
          </p>

          <p>
            <strong>There is no clear "optimal" zone.</strong> The data doesn't
            show clustering around 20-30% spending. Instead, we see a consistent
            negative relationship: lower spending = higher growth.
          </p>

          <p>
            <strong
              >The relationship is better described by inverse or exponential
              decay,</strong
            >
            not a quadratic curve. This suggests government spending doesn't
            need to reach some threshold to become harmful - it's harmful from
            the first dollar.
          </p>

          <h3>Traditional Theory vs. Empirical Reality</h3>
          <p><strong>The traditional quadratic theory claimed:</strong></p>
          <p style="text-align: center; font-style: italic; margin: 20px 0">
            Growth Rate = β₀ + β₁ × Government Spending + β₂ × (Government
            Spending)²
          </p>
          <p>
            Where β₀ represents baseline growth, β₁ captures supposed initial
            positive effects, and β₂ (negative) represents diminishing returns.
          </p>

          <p>
            <strong
              >But the data actually fits these patterns much better:</strong
            >
          </p>
          <p style="text-align: center; font-style: italic; margin: 20px 0">
            <strong>Inverse Model:</strong> Growth Rate = β₀ / (Government
            Spending + 1)<br />
            <strong>Exponential Decay:</strong> Growth Rate = β₀ × e^(-decay ×
            Government Spending)
          </p>
          <p>
            These models suggest there's no "beneficial phase" of government
            spending - it crowds out private investment from day one.
          </p>

          <h4>Understanding the Intercept (β₀)</h4>
          <p>
            The intercept represents the natural economic growth rate in the
            absence of government intervention. This baseline reflects:
          </p>
          <ul>
            <li>
              <strong>Entrepreneurial Innovation:</strong> Natural human
              creativity and problem-solving driving new products and services
            </li>
            <li>
              <strong>Voluntary Exchange:</strong> Wealth creation through
              mutually beneficial trade
            </li>
            <li>
              <strong>Capital Accumulation:</strong> Private savings and
              investment in productive assets
            </li>
            <li>
              <strong>Knowledge Spillovers:</strong> Information sharing and
              learning between economic actors
            </li>
            <li>
              <strong>Competition:</strong> Market pressure driving efficiency
              improvements
            </li>
            <li>
              <strong>Specialization:</strong> Gains from division of labor and
              comparative advantage
            </li>
          </ul>
          <p>
            Historical evidence suggests this baseline ranges from 2-4% annually
            in developed economies, representing the economy's natural tendency
            toward improvement when people are free to innovate, trade, and
            invest.
          </p>

          <h3>Real-World Policy Implications</h3>
          <p>
            If the data is right and the traditional theory is wrong, the policy
            implications are dramatic:
          </p>
          <ul>
            <li>
              <strong>No "Optimal Size" to Target:</strong> There's no sweet
              spot to fine-tune toward - just minimize government and maximize
              growth
            </li>
            <li>
              <strong>Every Program Has a Cost:</strong> Each government
              program, no matter how well-intentioned, reduces overall economic
              growth
            </li>
            <li>
              <strong>Quality Doesn't Matter:</strong> Even "efficient"
              government spending crowds out more efficient private alternatives
            </li>
            <li>
              <strong>The Infrastructure Myth:</strong> Private roads, private
              schools, and private security consistently outperform government
              alternatives where allowed to compete
            </li>
            <li>
              <strong>Maximum Reduction Strategy:</strong> The best policy is to
              cut government to the absolute minimum needed for basic rule of
              law
            </li>
          </ul>

          <h3>How the Theory Misled Policymakers</h3>
          <p>
            The Armey Curve theory emerged in the 1980s from observations that
            both very small governments (lacking basic institutions) and very
            large governments (socialist economies) had slower growth than
            moderate-sized governments. This seemed to suggest an optimal middle
            ground.
          </p>
          <p>
            <strong>But this analysis was flawed.</strong> Countries with "very
            small governments" were often failed states or developing nations
            with poor institutions, while "very large governments" were
            communist dictatorships. The comparison wasn't between different
            sizes of functional government - it was between functional and
            dysfunctional states.
          </p>
          <p>
            <strong
              >When you compare functional governments of different
              sizes,</strong
            >
            the pattern is clear: smaller government = higher growth. Singapore,
            Switzerland, and Estonia consistently outperform France, Germany,
            and Sweden on growth despite having much smaller governments.
          </p>
          <p>
            The theory gave academic cover to politicians who wanted to justify
            expanding government by claiming they were finding the "optimal"
            size. In reality, they were just reducing economic growth.
          </p>

          <h3>Why the Quadratic Model Produces Nonsensical Results</h3>
          <p>
            <strong>The quadratic Armey curve is fundamentally broken</strong>
            because it predicts impossible negative growth rates at high
            government spending levels. This mathematical artifact reveals why
            the traditional theory is wrong - real economies don't experience
            negative 5-10% GDP growth just because government spends 50-60% of
            GDP.
          </p>
          <p>
            <strong>What actually happens in high-spending countries:</strong>
            European countries with 35-45% government spending don't collapse
            into economic oblivion. They stagnate at low positive growth rates
            (0.5-1.5%), which is exactly what the inverse and exponential decay
            models predict.
          </p>
          <p>
            <strong>The math exposes the flaw:</strong> When you fit a quadratic
            curve (y = ax² + bx + c) to real data, it eventually curves downward
            so sharply that it predicts economic apocalypse. But Sweden at 35%
            spending doesn't have -8% growth - it has +0.8% growth. The
            quadratic model fails basic reality checks.
          </p>
          <h4>Why Inverse and Exponential Models Make Sense</h4>
          <ul>
            <li>
              <strong>Asymptotic Approach to Zero:</strong> Both models approach
              (but never reach) zero growth, which matches reality where even
              heavily regulated economies still limp along
            </li>
            <li>
              <strong>No Mathematical Artifacts:</strong> These models don't
              produce impossible negative growth rates at realistic government
              spending levels
            </li>
            <li>
              <strong>Diminishing Returns Without Collapse:</strong> They show
              government spending becomes increasingly harmful without
              predicting economic Armageddon
            </li>
            <li>
              <strong>Empirical Fit:</strong> They actually match what we
              observe - stagnation, not collapse, in high-spending economies
            </li>
          </ul>
          <p>
            <strong
              >This isn't a minor technical issue - it's proof the entire
              theoretical framework is wrong.</strong
            >
            When your economic model predicts that France should be experiencing
            Great Depression-level contractions year after year, maybe the
            problem isn't with France's economy - it's with your model.
          </p>

          <h3>Data Sources</h3>
          <p>
            The real-world country data displayed in this simulator comes from
            the World Bank's comprehensive database:
          </p>
          <ul>
            <li>
              <strong>Government Expenditure:</strong>
              <a
                href="https://data.worldbank.org/indicator/GC.XPN.TOTL.GD.ZS"
                target="_blank"
                rel="noopener"
                >Total government expenditure (% of GDP)</a
              >
              - Includes all government spending on goods, services, wages,
              transfers, and subsidies
            </li>
            <li>
              <strong>Economic Growth:</strong>
              <a
                href="https://data.worldbank.org/indicator/NY.GDP.MKTP.KD.ZG"
                target="_blank"
                rel="noopener"
                >GDP growth (annual %)</a
              >
              - Real GDP growth rate in constant local currency
            </li>
            <li>
              <strong>Data Period:</strong> Averages calculated over
              user-selected time periods (2005-2023 range)
            </li>
            <li>
              <strong>Methodology:</strong> Countries included only if they have
              at least 3 years of data in the selected period
            </li>
          </ul>
          <p>
            <em
              >Note: You can download the raw data directly from the World
              Bank's
              <a
                href="https://databank.worldbank.org/home.aspx"
                target="_blank"
                rel="noopener"
                >DataBank</a
              >
              for your own analysis.</em
            >
          </p>

          <h3>
            Why There's Still Scatter Even Though Government Size Matters Most
          </h3>
          <p>
            Even though the data clearly shows that smaller government = higher
            growth, you'll notice significant scatter around any curve model.
            This doesn't weaken the anti-government argument - it just shows
            that
            <strong
              >government size is the dominant but not the only factor affecting
              economic growth</strong
            >. Understanding these other factors helps explain why some
            high-spending countries aren't completely collapsed and why some
            low-spending countries aren't growing even faster.
          </p>

          <h4>Key Growth Factors Beyond Government Size</h4>

          <h5>1. Institutional Quality</h5>
          <ul>
            <li>
              <strong>Rule of Law:</strong> Strong property rights and contract
              enforcement enable investment and innovation
            </li>
            <li>
              <strong>Regulatory Efficiency:</strong> Streamlined business
              regulations reduce costs and encourage entrepreneurship
            </li>
            <li>
              <strong>Government Effectiveness:</strong> Quality of public
              administration and policy implementation matters more than size
            </li>
            <li>
              <strong>Corruption Control:</strong> Clean governance ensures
              resources go to productive uses
            </li>
          </ul>
          <p>
            <em
              >Example: Singapore (17% spending, 2.8% growth) combines efficient
              government with strong institutions, while some high-spending
              countries struggle with bureaucratic inefficiency.</em
            >
          </p>

          <h5>2. Development Stage and Catch-Up Potential</h5>
          <ul>
            <li>
              <strong>Convergence Effect:</strong> Developing countries can grow
              faster by adopting existing technologies
            </li>
            <li>
              <strong>Productivity Gaps:</strong> Room for improvement varies
              dramatically across countries
            </li>
            <li>
              <strong>Infrastructure Needs:</strong> Countries with
              infrastructure deficits can see high returns to investment
            </li>
          </ul>
          <p>
            <em
              >Example: Ethiopia (8.5% spending, 6.5% growth) and Rwanda (19.7%
              spending, 7.0% growth) benefit from catch-up growth potential
              despite very different government sizes.</em
            >
          </p>

          <h5>3. Demographics and Human Capital</h5>
          <ul>
            <li>
              <strong>Age Structure:</strong> Young, working-age populations
              drive growth; aging populations face headwinds
            </li>
            <li>
              <strong>Education Quality:</strong> Skills matching, innovation
              capacity, and adaptability to change
            </li>
            <li>
              <strong>Health Outcomes:</strong> Healthy populations are more
              productive and innovative
            </li>
          </ul>
          <p>
            <em
              >Example: Japan (19.7% spending, 0.2% growth) faces demographic
              headwinds with an aging population, while countries with young
              populations have natural growth advantages.</em
            >
          </p>

          <h5>4. Economic Structure and Openness</h5>
          <ul>
            <li>
              <strong>Trade Integration:</strong> Access to global markets and
              value chains
            </li>
            <li>
              <strong>Sectoral Composition:</strong> Manufacturing vs. services
              vs. agriculture productivity differences
            </li>
            <li>
              <strong>Export Competitiveness:</strong> Currency levels, labor
              costs, and specialization
            </li>
            <li>
              <strong>Foreign Investment:</strong> Technology transfer and
              capital inflows
            </li>
          </ul>
          <p>
            <em
              >Example: Ireland (22.3% spending, 6.8% growth) benefits from
              being a hub for multinational corporations and EU market
              access.</em
            >
          </p>

          <h5>5. Innovation and Technology</h5>
          <ul>
            <li>
              <strong>R&D Investment:</strong> Both public and private research
              spending drives long-term growth
            </li>
            <li>
              <strong>Technology Adoption:</strong> Digital infrastructure and
              automation capabilities
            </li>
            <li>
              <strong>Knowledge Spillovers:</strong> Proximity to innovation
              centers and universities
            </li>
            <li>
              <strong>Entrepreneurial Culture:</strong> Risk-taking and business
              creation rates
            </li>
          </ul>

          <h5>6. Macroeconomic Stability</h5>
          <ul>
            <li>
              <strong>Inflation Control:</strong> Price stability enables
              long-term planning and investment
            </li>
            <li>
              <strong>Financial Development:</strong> Access to credit and
              efficient capital allocation
            </li>
            <li>
              <strong>Exchange Rate Policy:</strong> Competitiveness and
              stability for trade
            </li>
            <li>
              <strong>Debt Sustainability:</strong> Manageable debt burdens and
              fiscal space
            </li>
          </ul>

          <h5>7. Natural Resources and Geography</h5>
          <ul>
            <li>
              <strong>Resource Endowments:</strong> Can be a blessing or curse
              depending on management
            </li>
            <li>
              <strong>Geographic Location:</strong> Access to markets, climate,
              and natural advantages
            </li>
            <li>
              <strong>Energy Costs:</strong> Access to affordable energy for
              industry and consumers
            </li>
          </ul>
          <p>
            <em
              >Example: Norway manages oil wealth well through sovereign wealth
              funds, while some resource-rich countries suffer from "Dutch
              disease."</em
            >
          </p>

          <h4>Understanding the Outliers</h4>

          <div class="info-card">
            <h5>High Growth with Low Spending:</h5>
            <ul>
              <li>
                <strong>Ethiopia (8.5% spending, 6.5% growth):</strong> Catch-up
                growth, infrastructure investment, young population
              </li>
              <li>
                <strong>Bangladesh (8.1% spending, 6.4% growth):</strong>
                Manufacturing growth, demographic dividend, low base
              </li>
              <li>
                <strong>Singapore (17% spending, 2.8% growth):</strong>
                Efficient government, strategic location, high-value services
              </li>
            </ul>
          </div>

          <div class="warning-card">
            <h5>Low Growth Despite Moderate Spending:</h5>
            <ul>
              <li>
                <strong>Japan (19.7% spending, 0.2% growth):</strong> Aging
                population, high debt, mature economy
              </li>
              <li>
                <strong>Germany (30.2% spending, 0.5% growth):</strong> Energy
                transition costs, mature manufacturing, demographic challenges
              </li>
              <li>
                <strong>Argentina (22.7% spending, 0% growth):</strong>
                Macroeconomic instability, inflation, institutional weaknesses
              </li>
            </ul>
          </div>

          <h4>Policy Implications</h4>
          <p>
            The scatter in the data teaches us that
            <strong
              >minimizing government size is necessary and usually
              sufficient</strong
            >
            for growth, but other factors can either amplify or diminish the
            benefits. The most successful growth strategies:
          </p>
          <ul>
            <li>
              <strong>Government Reduction First:</strong> Cut spending and
              regulations as the primary growth strategy
            </li>
            <li>
              <strong>Let Markets Handle the Rest:</strong> Most "other factors"
              (education, infrastructure, innovation) are better provided by
              private markets than government programs
            </li>
            <li>
              <strong>Institutional Quality Means Less Government:</strong>
              Strong rule of law protects private property and voluntary
              exchange, not government programs
            </li>
            <li>
              <strong>Stop Making Excuses:</strong> Demographics and geography
              don't justify maintaining large, growth-killing government sectors
            </li>
            <li>
              <strong>The Singapore Model:</strong> Minimal government with
              strong property rights consistently beats the European welfare
              state model
            </li>
          </ul>

          <p>
            <strong>Bottom line:</strong> The countries that combine small
            government with decent institutions achieve the highest growth
            rates. But if you can only pick one reform, pick smaller government
            - the data shows it's by far the most important factor for economic
            growth.
          </p>

          <h3>What the International Data Actually Shows</h3>
          <ul>
            <li>
              <strong>High Performers Have Small Governments:</strong> Singapore
              (17% spending, 2.8% growth), Switzerland (18% spending), Ireland
              (22% spending, 6.8% growth), and Estonia consistently outperform
              on growth
            </li>
            <li>
              <strong>Big Spenders Underperform:</strong> Nordic countries
              (Denmark 35%, Norway 37%, Finland 40%) and Germany (30% spending)
              achieve much lower growth rates (0.4-1.6%), despite their supposed
              "efficiency"
            </li>
            <li>
              <strong>Developing Countries Confirm the Pattern:</strong> Fast
              growers like Ethiopia (8.5% spending, 6.5% growth) and Bangladesh
              (8% spending, 6.4% growth) have minimal governments, while slow
              growers have bloated states
            </li>
            <li>
              <strong>No "Optimal" Clustering:</strong> Countries don't cluster
              around 20-30% spending with high growth - they're scattered, with
              a clear negative correlation between spending and growth
            </li>
            <li>
              <strong>The "Quality" Excuse Fails:</strong> Even supposedly
              "efficient" big governments (Nordic countries, Germany) still
              underperform small governments on growth
            </li>
          </ul>

          <p>
            <strong>The bottom line:</strong> When you actually look at the data
            without academic bias toward government, the pattern is clear. The
            Armey Curve theory was wrong. Government spending doesn't have a
            "beneficial phase" - it reduces economic growth from the first
            dollar, and the countries that have figured this out are eating
            everyone else's lunch economically.
          </p>

          <h3>Why Economists Got It Wrong</h3>
          <p>
            The traditional Armey Curve theory persisted because it told
            everyone what they wanted to hear:
          </p>
          <ul>
            <li>
              <strong>Politicians:</strong> "We're not big government - we're
              optimal government!"
            </li>
            <li>
              <strong>Academics:</strong> "Complex problems require nuanced,
              technocratic solutions!"
            </li>
            <li>
              <strong>Bureaucrats:</strong> "Society needs us to provide
              essential services!"
            </li>
            <li>
              <strong>Voters:</strong> "We can have our cake and eat it too!"
            </li>
          </ul>
          <p>
            But the Austrian school economists were right all along: government
            cannot create wealth, only redistribute it. Every dollar the
            government spends is a dollar that someone else doesn't get to
            invest more efficiently.
          </p>
          <h3>The Empirical Models That Actually Fit the Data</h3>
          <p>
            The linear, inverse, and exponential decay models all reflect
            economic reality better than the traditional quadratic curve:
          </p>
          <ul>
            <li>
              <strong>Austrian School Reality:</strong> Government cannot create
              wealth, only redistribute it. Every dollar spent by government is
              a dollar not invested by someone who actually earned it
            </li>
            <li>
              <strong>Crowding Out is Immediate:</strong> Government spending
              doesn't need to reach some magical threshold to become harmful -
              it displaces private investment from the first penny
            </li>
            <li>
              <strong>Bureaucratic Inefficiency:</strong> Government agencies
              have no profit motive, no competition, and no skin in the game.
              They will always be less efficient than market alternatives
            </li>
            <li>
              <strong>Political Rent-Seeking:</strong> Government spending
              creates constituencies that lobby for more spending, creating a
              vicious cycle of growth-destroying expansion
            </li>
            <li>
              <strong>Real World Evidence:</strong> Look at the data - many of
              the fastest-growing countries (Singapore, Hong Kong historically,
              Estonia) have smaller governments, while high-spending European
              countries stagnate
            </li>
          </ul>
          <p>
            These models cut through academic wishful thinking and state the
            empirical reality:
            <strong
              >the best government spending level for growth is as close to zero
              as possible</strong
            >
            while maintaining basic rule of law. Everything else just reduces
            the wealth that people could have created themselves.
          </p>

          <h3>The Smoking Gun: Why This Data Challenges Everything</h3>
          <p>
            When you compare real-world data points to the theoretical curves in
            this simulator, the results are damning for mainstream economic
            theory:
            <strong
              >the inverse and exponential decay models consistently fit the
              actual data better than the traditional quadratic Armey
              curve</strong
            >. This isn't just a statistical curiosity - it's evidence that
            decades of economic policy have been based on a fundamentally flawed
            theory.
          </p>

          <h4>What the Data is Actually Showing</h4>
          <ul>
            <li>
              <strong>No Clear "Optimal" Zone:</strong> The data doesn't show a
              strong clustering around some 20-30% "optimal" government size.
              Instead, we see a more consistent pattern: lower spending
              correlates with higher growth
            </li>
            <li>
              <strong>Inverse Pattern (1/x):</strong> Countries with minimal
              government spending (Singapore ~17%, historically Hong Kong ~15%)
              consistently achieve solid growth, while the negative effects of
              government spending diminish as countries approach European
              welfare-state levels but never disappear
            </li>
            <li>
              <strong>Exponential Decay Pattern:</strong> The most aggressive
              anti-government model actually fits well - suggesting that each
              additional percentage point of government spending causes
              accelerating damage to growth potential
            </li>
            <li>
              <strong>High-Spending Countries Cluster Low:</strong> European
              countries with 30-45% government spending consistently show low
              growth (0.5-1.5%), while low-spending developing countries often
              achieve 4-8% growth despite other challenges
            </li>
          </ul>

          <h4>Implications for Economic Theory</h4>
          <p>
            If the inverse or exponential models better describe reality, this
            suggests:
          </p>
          <ul>
            <li>
              <strong>Government Crowding-Out is Immediate:</strong> There may
              be no "beneficial phase" of government spending - even basic
              government services crowd out private alternatives that would
              generate more growth
            </li>
            <li>
              <strong>Compound Negative Effects:</strong> Government
              intervention may create cascading inefficiencies - regulatory
              capture, rent-seeking, bureaucratic expansion - that compound over
              time
            </li>
            <li>
              <strong>The "Infrastructure Argument" May Be Wrong:</strong> The
              common justification that government must provide roads,
              education, and basic services may be empirically false - private
              alternatives consistently outperform
            </li>
            <li>
              <strong>Academic Bias Toward Government:</strong> The quadratic
              model may persist in academia because it justifies the existence
              of the institutions that employ the researchers - a classic case
              of incentive alignment bias
            </li>
          </ul>

          <h4>Why This Demolishes Current Policy</h4>
          <p>
            If the real-world relationship is inverse or exponential rather than
            quadratic, then the policy implications are revolutionary:
            <strong>every current government program is making us poorer</strong
            >. There's no "optimal" level of government to fine-tune toward -
            there's just the question of how much economic damage we're willing
            to accept for political stability.
          </p>
          <p>
            This empirical reality validates the most radical libertarian
            position:
            <strong
              >the best economic policy is maximum government reduction, full
              stop</strong
            >. No compromises, no "smart government" tweaks, no technocratic
            optimization - just get government out of the way and let people
            create wealth.
          </p>
          <p>
            The fact that this economic simulator reveals this pattern suggests
            that the academic consensus around "optimal government size" isn't
            just wrong - it's been a costly mistake that has reduced economic
            growth for decades. The Austrian school economists have been
            vindicated: government intervention is pure economic deadweight
            loss, and the data proves it.
          </p>
        </div>
      </section>

      <!-- Natural Right Section -->
      <section class="natural-rights-section">
        <h2>The Right to Economic Growth</h2>

        <div class="right-card armey-specific">
          <div class="right-principle">
            <p>
              <strong>Negative Right:</strong> Freedom from excessive government
              interference in economic activity that stifles growth through
              overtaxation, overregulation, and misallocation of resources.
            </p>
          </div>

          <h4>Positive Institutional Foundations Required</h4>
          <div class="right-positive">
            <h4>Essential Institutions for Growth Protection:</h4>
            <ul>
              <li>
                <strong>Constitutional Spending Limits:</strong> Legal caps on
                government expenditure to prevent growth-killing fiscal
                expansion
              </li>
              <li>
                <strong>Independent Central Banking:</strong> Monetary policy
                insulated from political pressure to prevent inflation that
                erodes growth
              </li>
              <li>
                <strong>Regulatory Impact Assessment:</strong> Mandatory
                cost-benefit analysis before implementing growth-affecting
                regulations
              </li>
              <li>
                <strong>Fiscal Rules and Transparency:</strong> Budget processes
                that prioritize growth-enhancing over growth-reducing
                expenditures
              </li>
              <li>
                <strong>Tax Competition Frameworks:</strong> Legal structures
                allowing jurisdictional competition to discipline excessive
                taxation
              </li>
              <li>
                <strong>Sunset Clauses:</strong> Automatic expiration of
                government programs unless actively renewed with justification
              </li>
            </ul>
          </div>

          <h4>Current Threats to This Right</h4>
          <div class="right-enemies">
            <h4>Institutional Enemies of Growth:</h4>
            <ul>
              <li>
                <strong>Debt Monetization:</strong> Central bank financing of
                government deficits creating inflationary pressure
              </li>
              <li>
                <strong>Regulatory Capture:</strong> Agencies serving incumbent
                interests rather than economic efficiency
              </li>
              <li>
                <strong>Unfunded Mandates:</strong> Government requirements
                imposing costs without providing resources
              </li>
              <li>
                <strong>Procyclical Fiscal Policy:</strong> Government spending
                that amplifies rather than smooths business cycles
              </li>
              <li>
                <strong>Tax Code Complexity:</strong> Compliance costs and
                economic distortions from convoluted tax systems
              </li>
            </ul>
          </div>
        </div>
      </section>
    </div>

    <script>
      // World Bank API integration
      let countryData = {
        developed: [],
        developing: [],
      };

      let isDataLoaded = false;

      // Country classifications
      const developedCountries = [
        "USA",
        "DEU",
        "FRA",
        "GBR",
        "JPN",
        "CAN",
        "AUS",
        "CHE",
        "NLD",
        "SWE",
        "NOR",
        "DNK",
        "KOR",
        "SGP",
        "FIN",
        "AUT",
        "BEL",
        "IRL",
        "POL",
        "ISR",
      ];

      const developingCountries = [
        "CHN",
        "IND",
        "VNM",
        "BGD",
        "ETH",
        "RWA",
        "IDN",
        "PHL",
        "BRA",
        "MEX",
        "TUR",
        "CHL",
        "ZAF",
        "ARG",
        "VEN",
        "THA",
        "MYS",
        "EGY",
        "PRK",
        "CUB",
        "RUS",
        "IRN",
      ];

      // Fetch data from World Bank API
      async function fetchWorldBankData() {
        try {
          const allCountries = [...developedCountries, ...developingCountries];
          const countryString = allCountries.join(";");

          // Fetch broader date range to allow for different averaging periods
          // Fetch government expenditure data (% of GDP) - Total expenditure including transfers
          const spendingResponse = await fetch(
            `https://api.worldbank.org/v2/country/${countryString}/indicator/GC.XPN.TOTL.GD.ZS?date=2005:2023&format=json&per_page=1000`
          );
          const spendingData = await spendingResponse.json();

          // Fetch GDP growth data
          const growthResponse = await fetch(
            `https://api.worldbank.org/v2/country/${countryString}/indicator/NY.GDP.MKTP.KD.ZG?date=2005:2023&format=json&per_page=1000`
          );
          const growthData = await growthResponse.json();

          // Store raw data globally for processing with different time periods
          window.rawSpendingData = spendingData[1];
          window.rawGrowthData = growthData[1];

          // Process with default time period
          processDataForCurrentPeriod();
        } catch (error) {
          console.error("Error fetching World Bank data:", error);

          // Fallback to local JSON data
          try {
            const fallbackResponse = await fetch("fallback-data.json");
            const allPeriodData = await fallbackResponse.json();

            // Store the fallback data globally for time period switching
            window.fallbackData = allPeriodData;

            // Process with current time period
            processDataFromFallback();
          } catch (fallbackError) {
            console.error("Error loading fallback data:", fallbackError);
            // Final fallback to embedded data
            countryData = getFallbackData();
            isDataLoaded = true;
            updateDataStatus("Using embedded fallback data");
            updateHighlightCountryOptions();
            updateArmeySimulation();
          }
        }
      }

      function processDataForCurrentPeriod() {
        const timePeriod = document.getElementById("time-period-select").value;
        const dateRange = getDateRangeForPeriod(timePeriod);

        // Process the data with selected time period
        const processedData = processWorldBankData(
          window.rawSpendingData,
          window.rawGrowthData,
          dateRange
        );

        // Update country data
        countryData = processedData;
        isDataLoaded = true;

        // Update the UI to show data is loaded
        updateDataStatus(`Data loaded: ${dateRange.label}`);

        // Update the country highlight dropdown
        updateHighlightCountryOptions();

        // Refresh the chart
        updateArmeySimulation();
      }

      function processDataFromFallback() {
        const timePeriod = document.getElementById("time-period-select").value;
        const dateRange = getDateRangeForPeriod(timePeriod);

        // Use the appropriate period data from fallback
        if (window.fallbackData && window.fallbackData[timePeriod]) {
          countryData = window.fallbackData[timePeriod];
          isDataLoaded = true;
          updateDataStatus(`Using local fallback data: ${dateRange.label}`);
        } else {
          // If specific period not available, use embedded fallback
          countryData = getFallbackData();
          isDataLoaded = true;
          updateDataStatus("Using embedded fallback data");
        }

        updateHighlightCountryOptions();
        updateArmeySimulation();
      }

      function getDateRangeForPeriod(period) {
        switch (period) {
          case "recent":
            return { start: 2018, end: 2023, label: "2018-2023 (Recent)" };
          case "decade":
            return { start: 2014, end: 2023, label: "2014-2023 (Decade)" };
          case "long":
            return { start: 2010, end: 2023, label: "2010-2023 (Long-term)" };
          case "structural":
            return { start: 2005, end: 2023, label: "2005-2023 (Structural)" };
          default:
            return { start: 2014, end: 2023, label: "2014-2023 (Default)" };
        }
      }

      function processWorldBankData(
        spendingRaw,
        growthRaw,
        dateRange = { start: 2014, end: 2023, label: "2014-2023" }
      ) {
        const countryAverages = {};

        // Calculate averages for spending data
        if (spendingRaw) {
          spendingRaw.forEach((item) => {
            if (
              item.value !== null &&
              item.date >= dateRange.start &&
              item.date <= dateRange.end
            ) {
              const countryCode = item.countryiso3code;
              if (!countryAverages[countryCode]) {
                countryAverages[countryCode] = {
                  name: item.country.value,
                  spending: [],
                  growth: [],
                };
              }
              countryAverages[countryCode].spending.push(item.value);
            }
          });
        }

        // Calculate averages for growth data
        if (growthRaw) {
          growthRaw.forEach((item) => {
            if (
              item.value !== null &&
              item.date >= dateRange.start &&
              item.date <= dateRange.end
            ) {
              const countryCode = item.countryiso3code;
              if (countryAverages[countryCode]) {
                countryAverages[countryCode].growth.push(item.value);
              }
            }
          });
        }

        // Calculate final averages and categorize
        const developed = [];
        const developing = [];

        Object.entries(countryAverages).forEach(([code, data]) => {
          // Require at least 3 years of data for reliable average
          if (data.spending.length >= 3 && data.growth.length >= 3) {
            const avgSpending =
              data.spending.reduce((a, b) => a + b) / data.spending.length;
            const avgGrowth =
              data.growth.reduce((a, b) => a + b) / data.growth.length;

            const countryInfo = {
              name: data.name,
              spending: Math.round(avgSpending * 10) / 10,
              growth: Math.round(avgGrowth * 10) / 10,
              year: dateRange.label,
              dataPoints: data.spending.length,
            };

            if (developedCountries.includes(code)) {
              developed.push(countryInfo);
            } else {
              developing.push(countryInfo);
            }
          }
        });

        return { developed, developing };
      }

      function getFallbackData() {
        // Simplified fallback that returns recent period data only
        // This is used as the final fallback when both API and JSON fail
        return {
          developed: [
            {
              name: "Australia",
              spending: 28.5,
              growth: 2.5,
              year: "2018-2023 (Recent)",
              dataPoints: 5,
            },
            {
              name: "United States",
              spending: 26.5,
              growth: 2.5,
              year: "2018-2023 (Recent)",
              dataPoints: 6,
            },
            {
              name: "Ireland",
              spending: 22.3,
              growth: 6.8,
              year: "2018-2023 (Recent)",
              dataPoints: 5,
            },
            {
              name: "Singapore",
              spending: 17.2,
              growth: 2.8,
              year: "2018-2023 (Recent)",
              dataPoints: 6,
            },
          ],
          developing: [
            {
              name: "Rwanda",
              spending: 19.7,
              growth: 7.0,
              year: "2018-2023 (Recent)",
              dataPoints: 6,
            },
            {
              name: "Ethiopia",
              spending: 8.5,
              growth: 6.5,
              year: "2018-2023 (Recent)",
              dataPoints: 6,
            },
            {
              name: "Bangladesh",
              spending: 8.1,
              growth: 6.4,
              year: "2018-2023 (Recent)",
              dataPoints: 4,
            },
            {
              name: "Turkey",
              spending: 32.3,
              growth: 4.8,
              year: "2018-2023 (Recent)",
              dataPoints: 6,
            },
          ],
        };
      }

      function updateDataStatus(message) {
        const statusElement = document.getElementById("data-status");
        if (statusElement) {
          statusElement.textContent = message;
          statusElement.style.color = isDataLoaded ? "#28a745" : "#dc3545";
        }
      }

      function updateHighlightCountryOptions() {
        const select = document.getElementById("highlight-country-select");
        if (!select) return;

        // Clear existing options except "none"
        select.innerHTML =
          '<option value="none">No country highlighted</option>';

        if (!isDataLoaded) return;

        // Get all countries and sort them alphabetically
        const allCountries = [
          ...countryData.developed,
          ...countryData.developing,
        ];
        allCountries.sort((a, b) => a.name.localeCompare(b.name));

        // Add country options
        allCountries.forEach((country) => {
          const option = document.createElement("option");
          option.value = country.name;
          option.textContent = country.name;
          select.appendChild(option);
        });
      }

      // Armey Curve Implementation
      const ctxArmey = document
        .getElementById("growthChartArmey")
        .getContext("2d");
      let chartArmey;

      function getCountryDataToShow() {
        if (!isDataLoaded) return [];

        const selection = document.getElementById("country-select").value;
        if (selection === "none") return [];
        if (selection === "all")
          return [...countryData.developed, ...countryData.developing];
        return countryData[selection] || [];
      }

      function simulateCurveArmey(
        beta0,
        beta1,
        beta2,
        curveType = "quadratic",
        linearSlope = 0.1,
        inverseStrength = 50,
        expDecay = 0.03
      ) {
        const spending = Array.from({ length: 76 }, (_, i) => i); // 0% to 75%
        let growth;

        if (curveType === "quadratic") {
          growth = spending.map((g) => beta0 + beta1 * g + beta2 * g * g);
        } else if (curveType === "linear") {
          // Simple linear relationship: growth = beta0 + linearSlope * spending
          growth = spending.map((g) => beta0 + linearSlope * g);
        } else if (curveType === "inverse") {
          // Inverse relationship: growth starts at beta0 and declines as 1/(spending+1)
          growth = spending.map((g) => beta0 / (g + 1));
        } else if (curveType === "exponential") {
          // Exponential decay: growth = beta0 * e^(-expDecay * spending)
          growth = spending.map((g) => beta0 * Math.exp(-expDecay * g));
        }

        const countriesToShow = getCountryDataToShow();
        const highlightCountry = document.getElementById(
          "highlight-country-select"
        )?.value;

        const datasets = [
          {
            label:
              curveType === "quadratic"
                ? "Theoretical Armey Curve (Quadratic)"
                : curveType === "linear"
                ? "Theoretical Armey Curve (Linear)"
                : curveType === "inverse"
                ? "Theoretical Armey Curve (Inverse)"
                : "Theoretical Armey Curve (Exponential Decay)",
            data: spending.map((x, i) => ({ x: x, y: growth[i] })),
            borderColor: "#007bff",
            backgroundColor: "rgba(0, 123, 255, 0.1)",
            borderWidth: 3,
            fill: true,
            tension: curveType === "quadratic" ? 0.4 : 0,
            type: "line",
            pointRadius: 0,
          },
        ];

        if (countriesToShow.length > 0) {
          // Filter out the highlighted country from regular datasets
          const highlightedCountryData =
            highlightCountry !== "none"
              ? countriesToShow.find((c) => c.name === highlightCountry)
              : null;

          // Filter countries excluding the highlighted one
          const regularCountries = countriesToShow.filter(
            (c) => c.name !== highlightCountry
          );

          // Add developed countries (excluding highlighted)
          const developedCountries = regularCountries.filter((c) =>
            countryData.developed.includes(c)
          );
          if (developedCountries.length > 0) {
            datasets.push({
              label: "Developed Countries",
              data: developedCountries.map((c) => ({
                x: c.spending,
                y: c.growth,
                countryName: c.name,
                year: c.year,
              })),
              backgroundColor: "rgba(40, 167, 69, 0.8)",
              borderColor: "#28a745",
              borderWidth: 2,
              pointRadius: 6,
              pointHoverRadius: 8,
              type: "scatter",
              showLine: false,
            });
          }

          // Add developing countries (excluding highlighted)
          const developingCountries = regularCountries.filter((c) =>
            countryData.developing.includes(c)
          );
          if (developingCountries.length > 0) {
            datasets.push({
              label: "Developing Countries",
              data: developingCountries.map((c) => ({
                x: c.spending,
                y: c.growth,
                countryName: c.name,
                year: c.year,
              })),
              backgroundColor: "rgba(255, 193, 7, 0.8)",
              borderColor: "#ffc107",
              borderWidth: 2,
              pointRadius: 6,
              pointHoverRadius: 8,
              type: "scatter",
              showLine: false,
            });
          }

          // Add highlighted country as a separate dataset with red styling
          if (highlightedCountryData) {
            datasets.push({
              label: `Highlighted: ${highlightedCountryData.name}`,
              data: [
                {
                  x: highlightedCountryData.spending,
                  y: highlightedCountryData.growth,
                  countryName: highlightedCountryData.name,
                  year: highlightedCountryData.year,
                },
              ],
              backgroundColor: "rgba(220, 53, 69, 0.9)",
              borderColor: "#dc3545",
              borderWidth: 3,
              pointRadius: 8,
              pointHoverRadius: 10,
              type: "scatter",
              showLine: false,
            });
          }
        }

        if (chartArmey) chartArmey.destroy();
        chartArmey = new Chart(ctxArmey, {
          type: "line",
          data: {
            datasets: datasets,
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: true,
                position: "top",
              },
              tooltip: {
                callbacks: {
                  title: function (tooltipItems) {
                    const item = tooltipItems[0];
                    if (item.dataset.type === "scatter") {
                      const dataPoint = item.dataset.data[item.dataIndex];
                      return dataPoint.countryName || "Country";
                    }
                    return (
                      "Government Spending: " +
                      item.parsed.x.toFixed(1) +
                      "% of GDP"
                    );
                  },
                  label: function (context) {
                    if (context.dataset.type === "scatter") {
                      const dataPoint = context.dataset.data[context.dataIndex];
                      return [
                        "Gov Spending: " +
                          context.parsed.x.toFixed(1) +
                          "% of GDP",
                        "Growth Rate: " + context.parsed.y.toFixed(1) + "%",
                        "Period: " + (dataPoint.year || "2014-2023"),
                        "Data points: " +
                          (dataPoint.dataPoints || "N/A") +
                          " years",
                      ];
                    }
                    return "Growth Rate: " + context.parsed.y.toFixed(2) + "%";
                  },
                },
              },
            },
            scales: {
              x: {
                type: "linear",
                position: "bottom",
                title: {
                  display: true,
                  text: "Government Spending (% of GDP)",
                },
                grid: { color: "rgba(0,0,0,0.1)" },
                min: 0,
                max: 75,
              },
              y: {
                type: "linear",
                title: { display: true, text: "GDP Growth Rate (%)" },
                grid: { color: "rgba(0,0,0,0.1)" },
              },
            },
          },
        });

        // Calculate optimal
        let optimal, maxGrowth;

        if (curveType === "quadratic") {
          optimal = -beta1 / (2 * beta2);
          maxGrowth = beta0 + beta1 * optimal + beta2 * optimal * optimal;
        } else if (curveType === "linear") {
          // For linear, there's no optimal point - it's always increasing or decreasing
          if (linearSlope > 0) {
            optimal = 75; // Maximum spending point
            maxGrowth = beta0 + linearSlope * 75;
          } else if (linearSlope < 0) {
            optimal = 0; // Minimum spending point
            maxGrowth = beta0;
          } else {
            optimal = "N/A"; // Flat line
            maxGrowth = beta0;
          }
        } else if (curveType === "inverse") {
          // For inverse, optimal is at minimum spending (0%)
          optimal = 0;
          maxGrowth = beta0; // At 0% spending: beta0/(0+1) = beta0
        } else if (curveType === "exponential") {
          // For exponential decay, optimal is at minimum spending (0%)
          optimal = 0;
          maxGrowth = beta0;
        }

        const optimalText =
          typeof optimal === "number" ? optimal.toFixed(2) : optimal;
        const maxGrowthText =
          typeof maxGrowth === "number" ? maxGrowth.toFixed(2) : "N/A";

        document.getElementById("optimal-armey").innerHTML = `
                <strong>Optimal Government Spending:</strong> ${optimalText}% of GDP<br>
                <strong>Maximum Growth Rate:</strong> ${maxGrowthText}%<br>
                <em>${
                  curveType === "quadratic"
                    ? "This is where government spending maximizes economic growth while minimizing inefficiency."
                    : curveType === "linear"
                    ? linearSlope > 0
                      ? "Linear model: Growth increases continuously with spending."
                      : linearSlope < 0
                      ? "Linear model: Growth decreases continuously with spending."
                      : "Linear model: Growth is constant regardless of spending."
                    : curveType === "inverse"
                    ? "Inverse model: Growth declines rapidly at first, then levels off - minimal government is optimal."
                    : "Exponential decay: Government spending causes exponential decline in growth - zero spending is optimal."
                }</em>
            `;
      }

      function updateArmeySimulation() {
        const curveType = document.getElementById("curve-type-select").value;
        const beta0 = parseFloat(document.getElementById("beta0-armey").value);
        const beta1 = parseFloat(document.getElementById("beta1-armey").value);

        let beta2, linearSlope, inverseStrength, expDecay;

        if (curveType === "quadratic") {
          beta2 = parseFloat(document.getElementById("beta2-armey").value);
          if (!isNaN(beta0) && !isNaN(beta1) && !isNaN(beta2) && beta2 < 0) {
            simulateCurveArmey(beta0, beta1, beta2, curveType);
          }
        } else if (curveType === "linear") {
          linearSlope = parseFloat(
            document.getElementById("linear-slope").value
          );
          if (!isNaN(beta0) && !isNaN(linearSlope)) {
            simulateCurveArmey(beta0, beta1, 0, curveType, linearSlope);
          }
        } else if (curveType === "inverse") {
          inverseStrength = parseFloat(
            document.getElementById("inverse-strength").value
          );
          if (!isNaN(beta0) && !isNaN(inverseStrength)) {
            simulateCurveArmey(beta0, beta1, 0, curveType, 0, inverseStrength);
          }
        } else if (curveType === "exponential") {
          expDecay = parseFloat(document.getElementById("exp-decay").value);
          if (!isNaN(beta0) && !isNaN(expDecay)) {
            simulateCurveArmey(beta0, beta1, 0, curveType, 0, 0, expDecay);
          }
        }
      }

      function toggleParameterGroups() {
        const curveType = document.getElementById("curve-type-select").value;
        const beta1Group = document.getElementById("beta1-group");
        const beta2Group = document.getElementById("beta2-group");
        const linearSlopeGroup = document.getElementById("linear-slope-group");
        const inverseGroup = document.getElementById("inverse-group");
        const exponentialGroup = document.getElementById("exponential-group");

        // Hide all parameter groups first
        beta1Group.style.display = "none";
        beta2Group.style.display = "none";
        linearSlopeGroup.style.display = "none";
        inverseGroup.style.display = "none";
        exponentialGroup.style.display = "none";

        if (curveType === "quadratic") {
          beta1Group.style.display = "block";
          beta2Group.style.display = "block";

          // Reset to quadratic defaults
          document.getElementById("beta0-armey").value = "2";
          document.getElementById("beta1-armey").value = "0.5";
          document.getElementById("beta2-armey").value = "-0.01";
        } else if (curveType === "linear") {
          linearSlopeGroup.style.display = "block";

          // Reset to linear defaults
          document.getElementById("beta0-armey").value = "16";
          document.getElementById("linear-slope").value = "-0.3";
        } else if (curveType === "inverse") {
          inverseGroup.style.display = "block";

          // Reset to inverse defaults
          document.getElementById("beta0-armey").value = "100";
          document.getElementById("inverse-strength").value = "50";
        } else if (curveType === "exponential") {
          exponentialGroup.style.display = "block";

          // Reset to exponential defaults
          document.getElementById("beta0-armey").value = "100";
          document.getElementById("exp-decay").value = "0.3";
        }

        updateArmeySimulation();
      }

      // Event listeners
      document
        .getElementById("curve-type-select")
        .addEventListener("change", toggleParameterGroups);
      document
        .getElementById("beta0-armey")
        .addEventListener("input", updateArmeySimulation);
      document
        .getElementById("beta1-armey")
        .addEventListener("input", updateArmeySimulation);
      document
        .getElementById("beta2-armey")
        .addEventListener("input", updateArmeySimulation);
      document
        .getElementById("linear-slope")
        .addEventListener("input", updateArmeySimulation);
      document
        .getElementById("inverse-strength")
        .addEventListener("input", updateArmeySimulation);
      document
        .getElementById("exp-decay")
        .addEventListener("input", updateArmeySimulation);
      document
        .getElementById("country-select")
        .addEventListener("change", updateArmeySimulation);
      document
        .getElementById("highlight-country-select")
        .addEventListener("change", updateArmeySimulation);
      document
        .getElementById("time-period-select")
        .addEventListener("change", function () {
          if (window.rawSpendingData && window.rawGrowthData) {
            // Use live API data
            processDataForCurrentPeriod();
          } else if (window.fallbackData) {
            // Use fallback JSON data
            processDataFromFallback();
          } else {
            // Use embedded fallback (no time period switching available)
            updateArmeySimulation();
          }
        });

      // Initial simulation and data loading
      simulateCurveArmey(2, 0.5, -0.01, "quadratic");

      // Load real data from World Bank API
      updateDataStatus("Loading data from World Bank API...");
      fetchWorldBankData();

      // Handle resize
      let resizeTimeout;
      window.addEventListener("resize", () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(() => {
          if (chartArmey) chartArmey.resize();
        }, 100);
      });
    </script>

    <!-- Shared Navigation -->
    <script src="shared-navigation.js"></script>
    <script>
      insertNavigation();
    </script>
  </body>
</html>
