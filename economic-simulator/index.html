<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Economic Curves Simulator: Armey, Laffer, J-Curve, and Supply-Demand
      Analysis Tool
    </title>

    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="Interactive economic simulator for Armey, Laffer, J-Curves, and Supply-Demand. Explore the relationship between government spending, tax rates, economic shocks, recovery, and market equilibria with real-time visualizations and adjustable parameters."
    />
    <meta
      name="keywords"
      content="economic simulator, Armey curve, Laffer curve, J-Curve, supply demand, government spending, tax rates, economic growth, fiscal policy, devaluation, shock therapy, public economics, interactive economics, economic visualization, GDP growth, taxation theory, Milei Argentina, market equilibrium"
    />
    <meta name="author" content="Julien Reszka" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="English" />
    <meta name="theme-color" content="#007bff" />

    <!-- Open Graph Meta Tags for Social Sharing -->
    <meta
      property="og:title"
      content="Economic Curves Simulator: Interactive Armey, Laffer, J-Curve, and Supply-Demand Analysis"
    />
    <meta
      property="og:description"
      content="Explore economic theory with interactive Armey, Laffer, J-Curves, and Supply-Demand. Adjust parameters to see how government spending, tax rates, policy shocks, and market forces affect economic growth, taxation consent, recovery, and equilibria."
    />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://julienreszka.github.io/economic-simulator/"
    />
    <meta
      property="og:image"
      content="https://julienreszka.github.io/economic-simulator/og-image.png"
    />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:site_name" content="Julien Reszka's Economic Tools" />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="Economic Curves Simulator: Interactive Armey, Laffer, J-Curve, and Supply-Demand Analysis"
    />
    <meta
      name="twitter:description"
      content="Interactive tool for exploring Armey, Laffer, J-Curves, and Supply-Demand with real-time parameter adjustments and economic visualizations."
    />
    <meta
      name="twitter:image"
      content="https://julienreszka.github.io/economic-simulator/twitter-card.png"
    />
    <meta name="twitter:creator" content="@julienreszka" />

    <!-- Canonical URL -->
    <link
      rel="canonical"
      href="https://julienreszka.github.io/economic-simulator/"
    />

    <!-- Additional SEO elements -->
    <link
      rel="sitemap"
      type="application/xml"
      href="https://julienreszka.github.io/sitemap.xml"
    />

    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" />
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" />

    <!-- Favicon (assuming it exists) -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Economic Curves Simulator",
        "description": "Interactive economic simulator for exploring Armey, Laffer, J-Curves, and Supply-Demand, demonstrating the relationship between government spending, tax rates, policy shocks, market forces, economic growth, and taxation consent.",
        "url": "https://julienreszka.github.io/economic-simulator/",
        "applicationCategory": "EducationalApplication",
        "operatingSystem": "Any",
        "browserRequirements": "Modern web browser with JavaScript support",
        "author": {
          "@type": "Person",
          "name": "Julien Reszka",
          "url": "https://julienreszka.github.io/"
        },
        "creator": {
          "@type": "Person",
          "name": "Julien Reszka"
        },
        "datePublished": "2024-01-01",
        "dateModified": "2025-10-01",
        "inLanguage": "en-US",
        "isAccessibleForFree": true,
        "educationalUse": [
          "Economics Education",
          "Policy Analysis",
          "Academic Research",
          "Interactive Learning"
        ],
        "keywords": [
          "Armey Curve",
          "Laffer Curve",
          "J-Curve",
          "Supply and Demand",
          "Economic Theory",
          "Government Spending",
          "Tax Policy",
          "Economic Growth",
          "Fiscal Policy",
          "Devaluation",
          "Shock Therapy",
          "Public Economics",
          "Milei Argentina",
          "Market Equilibrium"
        ],
        "about": [
          {
            "@type": "Thing",
            "name": "Armey Curve",
            "description": "Economic model describing the relationship between government spending and economic growth"
          },
          {
            "@type": "Thing",
            "name": "Laffer Curve",
            "description": "Economic theory illustrating the relationship between tax rates and tax revenue collection"
          },
          {
            "@type": "Thing",
            "name": "J-Curve",
            "description": "Economic phenomenon showing initial deterioration followed by improvement after a policy shock like devaluation"
          },
          {
            "@type": "Thing",
            "name": "Supply and Demand",
            "description": "Fundamental economic model showing how prices and quantities reach equilibrium in markets"
          }
        ],
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD",
          "availability": "https://schema.org/InStock"
        }
      }
    </script>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      #container {
        max-width: 2400px;
        margin: auto;
      }
      #curves-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
      }
      p {
        margin: 0px;
        margin-bottom: 10px;
      }
      h1 {
        font-size: 20px;
      }
      h2 {
        font-size: 18px;
        margin-bottom: 15px;
        color: #333;
      }
      /* Screen reader only content */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }
      @media (min-width: 768px) {
        #curves-grid {
          grid-template-columns: 1fr 1fr;
        }
      }
      @media (min-width: 1400px) {
        #curves-grid {
          grid-template-columns: 1fr 1fr 1fr;
        }
      }
      @media (min-width: 1800px) {
        #curves-grid {
          grid-template-columns: 1fr 1fr 1fr 1fr;
        }
      }
      .chart-container {
        position: relative;
        height: 350px;
        width: 100%;
        margin-bottom: 10px;
      }
      canvas {
        display: block;
      }
      form {
        margin-bottom: 0px;
      }
      label {
        display: block;
        margin: 10px 0 5px;
      }
      input {
        width: 100%;
        padding: 8px;
      }
      @media (min-width: 1024px) {
        form {
          display: grid;
          grid-template-columns: 1fr 1fr 1fr 90px;
          gap: 15px;
          align-items: end;
        }
        #paramsFormJCurve,
        #paramsFormSupplyDemand {
          grid-template-columns: 1fr 1fr 1fr 1fr 90px;
        }
        .param-group {
          display: flex;
          flex-direction: column;
        }
        .param-group label {
          margin: 0 0 5px 0;
          font-size: 10px;
        }
        .param-group input {
          width: 100%;
        }
        form button {
          margin: 0;
        }
      }
      button {
        padding: 10px 20px;
        background: #007bff;
        color: white;
        border: none;
        cursor: pointer;
      }
      button:hover {
        background: #0056b3;
      }
      #optimal-armey,
      #optimal-laffer,
      #jcurve-insights,
      #equilibrium-supplydemand {
        font-size: 18px;
        font-weight: bold;
        margin-top: 0px;
      }
      section {
        margin-bottom: 50px;
      }
      @media (min-width: 1024px) {
        section {
          margin-bottom: 20px;
        }
      }
      summary {
        font-weight: bold;
        cursor: pointer;
      }

      details {
        border: 1px solid #ccc;
        padding: 10px;
        border-radius: 5px;
      }
      details > div {
        max-height: 20svh;
        overflow-y: auto;
      }

      /* Footer styling */
      footer {
        margin-top: 60px;
        padding: 40px 20px 20px;
        border-top: 1px solid #e0e0e0;
        background-color: #f8f9fa;
      }
      footer nav ul {
        list-style: none;
        padding: 0;
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
      }
      footer nav ul li a {
        color: #007bff;
        text-decoration: none;
      }
      footer nav ul li a:hover {
        text-decoration: underline;
      }
      footer h3 {
        margin-bottom: 15px;
        font-size: 16px;
      }
      @media (max-width: 768px) {
        footer nav ul {
          flex-direction: column;
          gap: 10px;
        }
      }
    </style>
  </head>
  <body>
    <div id="container">
      <h1>
        Economic Curves Simulator: Armey, Laffer, J-Curve, and Supply-Demand
      </h1>
      <p>
        This web app simulates four key economic curves: the Armey curve (public
        spending vs. economic growth), the Laffer curve (tax rates vs. consent
        to taxation), the J-Curve (policy shocks vs. economic recovery), and
        Supply-Demand (market forces vs. equilibrium). All use parametric models
        to illustrate dynamic relationships. Adjust parameters to explore
        different scenarios.
      </p>

      <div id="curves-grid">
        <section id="armey-section" aria-labelledby="armey-heading">
          <details open>
            <summary>About the Armey Curve</summary>
            <div style="margin-top: 15px; line-height: 1.6">
              <p>
                The Armey curve is an economic model that describes the
                relationship between the size of government spending and
                economic growth. It posits that as government spending increases
                from zero, economic growth initially rises because essential
                public goods—like infrastructure, the legal system, and
                education—boost prosperity and stability. However, after
                reaching an optimal point, further increases in government size
                lead to diminishing returns, inefficiency, and crowding out of
                private investment, so economic growth then declines.
              </p>

              <h3>Curve Structure</h3>
              <p>
                The Armey curve is typically illustrated as an inverted U-shaped
                (parabolic) graph. On the horizontal axis is government spending
                (often as a percentage of GDP), and on the vertical axis is
                economic growth or societal welfare. The "peak" of the curve
                represents the optimal government size for maximum growth.
                Empirical research commonly situates this optimum between 20%
                and 30% of GDP, though the exact figure varies by country and
                time period.
              </p>

              <h3>Mathematical Formulation</h3>
              <p>The curve is often expressed with a quadratic equation:</p>
              <p style="text-align: center; font-style: italic">
                Y = β₀ + β₁ · G + β₂ · G²
              </p>
              <p>
                where Y is economic growth, G is government spending, and
                coefficients β₁ > 0, β₂ < 0 capture the concave shape—positive
                effects at first, negative effects after the turning point.
              </p>

              <h4>Understanding the Intercept (β₀)</h4>
              <p>
                The positive intercept value β₀ represents the
                <strong
                  >natural growth rate without government intervention</strong
                >. This is the baseline economic growth rate that would occur
                when G = 0 (zero government spending), driven purely by private
                sector activity including:
              </p>
              <ul>
                <li>
                  <strong>Private sector dynamics:</strong> Businesses,
                  entrepreneurs, and markets operating without government
                  involvement
                </li>
                <li>
                  <strong>Natural productivity gains:</strong> Technological
                  innovation, efficiency improvements, and capital accumulation
                  driven by private actors
                </li>
                <li>
                  <strong>Spontaneous market coordination:</strong> Voluntary
                  exchanges and market mechanisms that create value
                </li>
                <li>
                  <strong>Population growth effects:</strong> Demographic
                  changes that contribute to economic expansion
                </li>
              </ul>
              <p>
                In essence, β₀ represents the growth rate of a purely
                laissez-faire economy where all economic activity comes from
                private initiative, without any government provision of public
                goods, infrastructure, regulation, or spending. The rest of the
                curve then shows how government spending can initially enhance
                this natural growth (through beneficial public goods) before
                eventually hindering it (through inefficiencies and crowding
                out).
              </p>

              <h3>Policy Implications</h3>
              <ul>
                <li>
                  An undersized government fails to provide basic public goods,
                  resulting in low growth due to lack of order, security, and
                  infrastructure.
                </li>
                <li>
                  An oversized government leads to inefficiencies, less
                  incentive for private enterprise, and lower economic growth
                  due to excessive regulation, high taxation, and crowding out.
                </li>
              </ul>

              <h3>Historical Context</h3>
              <p>
                The Armey curve is named after U.S. Representative Dick Armey,
                who popularized it in the 1990s. Its logic parallels the Laffer
                curve, but focuses on the broader scope of government spending
                rather than just tax rates.
              </p>

              <h3>Understanding Negative Growth Rate Values</h3>
              <p>
                In the mathematical model, government spending levels beyond the
                optimal point can produce negative growth rate values. While
                sustained negative growth (economic contraction) is possible in
                reality, these extreme negative values represent theoretical
                scenarios of economic dysfunction:
              </p>
              <ul>
                <li>
                  <strong>Economic stagnation:</strong> Excessive government
                  spending (beyond the optimal point) creates such massive
                  inefficiencies and crowding out of private investment that the
                  economy contracts rather than grows.
                </li>
                <li>
                  <strong>Regulatory capture:</strong> Oversized government
                  becomes dominated by special interests and rent-seeking
                  behavior, leading to resource misallocation and economic
                  decline.
                </li>
                <li>
                  <strong>Investment flight:</strong> Private businesses and
                  entrepreneurs abandon the economy due to excessive
                  bureaucracy, high taxes needed to fund large government, and
                  lack of economic freedom.
                </li>
                <li>
                  <strong>Productivity collapse:</strong> Innovation,
                  entrepreneurship, and productive economic activity become so
                  constrained by government interference that overall economic
                  output shrinks.
                </li>
              </ul>
              <p>
                In practice, extremely negative growth rates would signal
                economic crisis and would likely trigger policy corrections
                before reaching the theoretical extremes suggested by the
                mathematical model.
              </p>

              <h3>Comparative Findings</h3>
              <ul>
                <li>
                  Optimal government size can vary with factors like openness of
                  the economy, population size, and national context.
                </li>
                <li>
                  Empirical studies find different threshold values for optimal
                  government size in countries such as the U.S., France, Kenya,
                  Turkey, and Georgia—ranging from less than 20% up to 30% of
                  GDP.
                </li>
              </ul>

              <p>
                In summary, the Armey curve highlights that both too little and
                too much government spending can harm economic growth, and seeks
                to identify the optimal share that maximizes prosperity.
              </p>
            </div>
          </details>

          <form id="paramsFormArmey" aria-labelledby="armey-heading">
            <div class="param-group">
              <label for="beta0-armey"
                >Intercept (β₀, base growth, e.g., 4.5):</label
              >
              <input
                type="number"
                id="beta0-armey"
                value="4.5"
                step="0.1"
                aria-describedby="beta0-armey-help"
              />
              <small id="beta0-armey-help" class="sr-only"
                >Natural growth rate without government intervention</small
              >
            </div>

            <div class="param-group">
              <label for="beta1-armey"
                >Linear coefficient (β₁, positive, e.g., 0.5):</label
              >
              <input
                type="number"
                id="beta1-armey"
                value="0.5"
                step="0.01"
                aria-describedby="beta1-armey-help"
              />
              <small id="beta1-armey-help" class="sr-only"
                >Initial positive effect of government spending</small
              >
            </div>

            <div class="param-group">
              <label for="beta2-armey"
                >Quadratic coefficient (β₂, negative, e.g., -0.01):</label
              >
              <input
                type="number"
                id="beta2-armey"
                value="-0.01"
                step="0.001"
                aria-describedby="beta2-armey-help"
              />
              <small id="beta2-armey-help" class="sr-only"
                >Diminishing returns effect (must be negative)</small
              >
            </div>

            <button type="submit">Simulate</button>
          </form>

          <div
            class="chart-container"
            role="img"
            aria-labelledby="armey-chart-label"
          >
            <canvas
              id="growthChartArmey"
              aria-label="Interactive Armey Curve showing relationship between government spending and economic growth"
            ></canvas>
            <div id="armey-chart-label" class="sr-only">
              Chart displaying the Armey Curve with government spending on
              x-axis and GDP growth rate on y-axis
            </div>
          </div>
          <div id="optimal-armey" aria-live="polite"></div>
        </section>

        <section id="laffer-section" aria-labelledby="laffer-heading">
          <details open>
            <summary>About the Laffer Curve</summary>
            <div style="margin-top: 15px; line-height: 1.6">
              <p>
                The Laffer curve illustrates the theoretical relationship
                between rates of taxation and the resulting levels of consent to
                taxation. It suggests that at a tax rate of 0%, consent is zero
                (no taxes means no need for consent), and at 100%, consent
                becomes -100% because there is no incentive to work or produce
                under complete confiscation. Between these extremes, consent
                rises to a maximum and then falls.
              </p>

              <h3>Curve Structure</h3>
              <p>
                The Laffer curve is depicted as an inverted U-shaped graph. The
                horizontal axis represents the tax rate (from 0% to 100%), and
                the vertical axis shows consent to taxation. The peak indicates
                the optimal tax rate that maximizes societal acceptance, beyond
                which higher rates reduce consent due to disincentives and
                resistance.
              </p>
              <p>
                <strong>Important note on the y-axis:</strong> The y-axis
                doesn't measure literal revenue but rather the theoretical
                economic health and viability of the tax system. Thus, negative
                values serve as a warning of extreme disincentives and economic
                dysfunction rather than actual negative tax revenue.
              </p>

              <h3>Why Consent to Taxation Increases Initially</h3>
              <p>
                Consent to taxation rises from 0% to the optimal point for
                several interconnected reasons:
              </p>
              <ul>
                <li>
                  <strong>Social contract fulfillment:</strong> As tax rates
                  increase from zero, governments can provide essential public
                  goods (defense, law enforcement, infrastructure) that citizens
                  value, creating legitimate reasons for taxation.
                </li>
                <li>
                  <strong>Economic productivity gains:</strong> Moderate
                  taxation enables public investments that boost overall
                  economic productivity, making the tax burden worthwhile as
                  citizens see their living standards improve.
                </li>
                <li>
                  <strong>Perceived fairness:</strong> When tax rates are
                  reasonable and well-spent, citizens view taxation as a fair
                  contribution to collective welfare rather than confiscation.
                </li>
                <li>
                  <strong>Institutional trust:</strong> Effective government
                  services funded by moderate taxes build public trust in
                  institutions, increasing voluntary compliance and acceptance.
                </li>
                <li>
                  <strong>Collective benefit recognition:</strong> Citizens
                  understand that moderate taxation enables shared benefits
                  (education, healthcare, infrastructure) that would be
                  impossible to achieve individually.
                </li>
              </ul>
              <p>
                Beyond the optimal point, consent declines as the marginal costs
                of higher taxes (reduced incentives, economic inefficiency)
                outweigh the marginal benefits of additional government
                services.
              </p>

              <h3>Mathematical Formulation</h3>
              <p>The curve can be modeled with a quadratic equation:</p>
              <p style="text-align: center; font-style: italic">
                R = β₀ + β₁ · t + β₂ · t²
              </p>
              <p>
                where R is tax revenue, t is the tax rate, β₀ is often 0, β₁ >
                0, and β₂ < 0 to create the parabolic shape. More advanced
                models may use different functional forms.
              </p>

              <h3>Policy Implications</h3>
              <ul>
                <li>
                  If tax rates are below the peak, increasing them can boost
                  revenue.
                </li>
                <li>
                  If rates are above the peak, cutting taxes can stimulate
                  economic activity, leading to higher revenue over time.
                </li>
                <li>
                  It highlights the trade-off between tax rates and economic
                  incentives, influencing debates on supply-side economics.
                </li>
              </ul>

              <h3>Historical Context</h3>
              <p>
                Popularized by economist Arthur Laffer in 1974 during a meeting
                with U.S. policymakers, the concept has roots in earlier
                thinkers like Ibn Khaldun (14th century) and John Maynard
                Keynes. It gained prominence in the 1980s under Reagan's tax
                cuts.
              </p>

              <h3>Understanding Negative Revenue Values</h3>
              <p>
                In the mathematical model, tax rates above 50% produce negative
                revenue values. While negative tax revenue is impossible in
                reality, these values represent theoretical economic collapse
                scenarios:
              </p>
              <ul>
                <li>
                  <strong>Economic collapse:</strong> Extremely high tax rates
                  (above 50% in this model) create such massive disincentives
                  that economic activity collapses to the point where the
                  government would theoretically need to pay people to engage in
                  economic activity.
                </li>
                <li>
                  <strong>Underground economy:</strong> People completely exit
                  the formal, taxable economy and move to barter, black markets,
                  or simply stop productive activity altogether.
                </li>
                <li>
                  <strong>Capital flight:</strong> Businesses and wealthy
                  individuals leave the country entirely, taking their economic
                  activity with them.
                </li>
                <li>
                  <strong>Disincentive effects:</strong> Work, investment, and
                  entrepreneurship become so unprofitable that they essentially
                  cease, creating a death spiral where the tax base evaporates.
                </li>
              </ul>
              <p>
                In practice, governments would see revenue approach zero rather
                than go negative, as the economy would collapse or transform
                into an untaxable shadow economy.
              </p>

              <h3>Comparative Findings</h3>
              <ul>
                <li>
                  The consent-maximizing rate is often estimated around 25% for
                  a balanced budget maximizing long term growth.
                </li>
              </ul>

              <p>
                In summary, the Laffer curve demonstrates that tax rates and
                revenue are not linearly related, emphasizing the need to find
                the optimal rate that maximizes government income without
                stifling economic growth.
              </p>
            </div>
          </details>

          <form id="paramsFormLaffer" aria-labelledby="laffer-heading">
            <div class="param-group">
              <label for="beta0-laffer">
                Intercept (β₀, base consent, e.g., 0):
              </label>
              <input
                type="number"
                id="beta0-laffer"
                value="0"
                step="0.1"
                aria-describedby="beta0-laffer-help"
              />
              <small id="beta0-laffer-help" class="sr-only"
                >Base taxation consent level</small
              >
            </div>

            <div class="param-group">
              <label for="beta1-laffer"
                >Linear coefficient (β₁, positive, e.g., 1):</label
              >
              <input
                type="number"
                id="beta1-laffer"
                value="1"
                step="0.01"
                aria-describedby="beta1-laffer-help"
              />
              <small id="beta1-laffer-help" class="sr-only"
                >Initial positive effect of taxation</small
              >
            </div>

            <div class="param-group">
              <label for="beta2-laffer"
                >Quadratic coefficient (β₂, negative, e.g., -0.02):</label
              >
              <input
                type="number"
                id="beta2-laffer"
                value="-0.02"
                step="0.001"
                aria-describedby="beta2-laffer-help"
              />
              <small id="beta2-laffer-help" class="sr-only"
                >Diminishing returns effect (must be negative)</small
              >
            </div>

            <button type="submit">Simulate</button>
          </form>

          <div
            class="chart-container"
            role="img"
            aria-labelledby="laffer-chart-label"
          >
            <canvas
              id="growthChartLaffer"
              aria-label="Interactive Laffer Curve showing relationship between tax rates and consent to taxation"
            ></canvas>
            <div id="laffer-chart-label" class="sr-only">
              Chart displaying the Laffer Curve with tax rate on x-axis and
              consent to taxation on y-axis
            </div>
          </div>
          <div id="optimal-laffer" aria-live="polite"></div>
        </section>

        <section id="jcurve-section" aria-labelledby="jcurve-heading">
          <details open>
            <summary>About the J-Curve</summary>
            <div style="margin-top: 15px; line-height: 1.6">
              <p>
                The J-Curve shows what happens to an economy after a major
                policy change, like when a country suddenly devalues its
                currency or implements drastic budget cuts. The name comes from
                the "J" shape of the curve: things get worse before they get
                better. First, the economy dips down (the bottom of the J), then
                gradually recovers and eventually improves beyond where it
                started (the upward hook of the J).
              </p>

              <h3>How It Works</h3>
              <p>
                Imagine the graph: time moves along the bottom (months or
                years), and economic health goes up and down on the side. When a
                big policy change happens, the economy starts at a normal level,
                immediately drops to a low point, then slowly climbs back up and
                eventually rises higher than before. This creates a shape that
                looks like the letter "J".
              </p>

              <h3>The Math Behind It</h3>
              <p>The curve follows this pattern:</p>
              <p style="text-align: center; font-style: italic">
                Y(t) = Base + Slope · t - Depth · (1 - e^{-t / τ})
              </p>
              <p>
                <strong>What this means in plain English:</strong>
              </p>
              <ul>
                <li>
                  <strong>Base:</strong> Where the economy started before the
                  shock
                </li>
                <li>
                  <strong>Depth:</strong> How bad things get initially (the
                  deeper the dip, the harder it hits)
                </li>
                <li>
                  <strong>τ (tau):</strong> How long the pain lasts (higher
                  number = longer recovery time)
                </li>
                <li>
                  <strong>Slope:</strong> How fast the economy improves in the
                  long run
                </li>
              </ul>

              <h3>Why Does It Get Worse First?</h3>
              <p>
                When a government makes a big change, the negative effects hit
                immediately while the positive effects take time to materialize:
              </p>
              <ul>
                <li>
                  <strong>Immediate price shocks:</strong> If a currency loses
                  value, imports become more expensive right away, but it takes
                  time for exports to increase (people still buy the same things
                  out of habit).
                </li>
                <li>
                  <strong>Loss of confidence:</strong> People and businesses
                  panic and cut back spending, making things worse temporarily.
                </li>
                <li>
                  <strong>Budget cuts hurt first:</strong> When government
                  spending gets slashed, jobs are lost and services disappear
                  before new private sector growth can replace them.
                </li>
              </ul>

              <h3>What This Means for Policy</h3>
              <ul>
                <li>
                  <strong>Patience required:</strong> Governments must endure
                  the difficult period to reach the recovery phase.
                </li>
                <li>
                  <strong>Support helps:</strong> Providing temporary assistance
                  (like unemployment benefits or food aid) can make the dip less
                  severe.
                </li>
                <li>
                  <strong>Warning sign:</strong> If the economy doesn't start
                  recovering after the expected time, the policy might not be
                  working (the J turns into an L - permanent decline).
                </li>
              </ul>

              <h3>Real-World Examples</h3>

              <h4>Poland's "Shock Therapy" (1990-1992) - A Success Story</h4>
              <p>
                After communism fell in 1989, Poland implemented one of the
                first and most successful shock therapy programs under economist
                Leszek Balcerowicz. The country faced hyperinflation (600%),
                food shortages, and obsolete state-owned industries.
              </p>

              <h5>The Reforms (What They Did)</h5>
              <ul>
                <li>
                  <strong>Price liberalization:</strong> Removed government
                  price controls on nearly all goods
                </li>
                <li>
                  <strong>Currency reform:</strong> Made the zloty internally
                  convertible and allowed market exchange rates
                </li>
                <li>
                  <strong>Budget discipline:</strong> Ended deficit financing by
                  the central bank and controlled wage growth
                </li>
                <li>
                  <strong>Trade opening:</strong> Eliminated import restrictions
                  and created uniform tariffs
                </li>
              </ul>

              <h5>The Dip (Things Got Worse)</h5>
              <ul>
                <li>GDP fell 9.78% in 1990 and 7.02% in 1991</li>
                <li>Unemployment jumped from 0.3% to 6.5% in one year</li>
                <li>Many inefficient state companies closed immediately</li>
                <li>Widespread anxiety about economic future</li>
              </ul>

              <h5>The Recovery (Things Got Better)</h5>
              <ul>
                <li>
                  <strong>Sustained growth:</strong> GDP grew steadily at 6-7%
                  annually through the late 1990s and 2000s
                </li>
                <li>
                  <strong>Best in Europe:</strong> Poland's GDP increased
                  826.96% from 1989-2018, the highest growth in Europe
                </li>
                <li>
                  <strong>Only EU economy to avoid 2008 recession:</strong>
                  Continued growing during the global financial crisis
                </li>
                <li>
                  Consumption of goods (cars, appliances, food) boomed as living
                  standards rose
                </li>
                <li>
                  Upgraded to "developed market" status by FTSE Russell in 2018
                </li>
              </ul>

              <h5>Why Poland Succeeded</h5>
              <p>
                Unlike Russia's chaotic transition, Poland had several
                advantages: private agriculture still existed, democratic
                institutions were stable, privatization was more gradual and
                equitable, and the country maintained some social safety nets.
                This shows that shock therapy can work—but the details of
                implementation matter enormously.
              </p>

              <h4>Argentina's Economic Shock (2023-2025) - Ongoing</h4>
              <p>
                President Javier Milei took office in Argentina in late 2023 and
                immediately implemented radical economic changes, creating a
                textbook J-Curve scenario:
              </p>

              <h5>The Reforms (What He Did)</h5>
              <ol>
                <li>
                  <strong>Currency devaluation:</strong> Let the peso drop in
                  value from 400 to 800 per US dollar
                </li>
                <li>
                  <strong>Budget cuts:</strong> Slashed government spending from
                  over 5% deficit to achieve a surplus
                </li>
                <li>
                  <strong>Deregulation:</strong> Removed many government
                  controls on business and markets
                </li>
              </ol>

              <h5>The Dip (Things Got Worse)</h5>
              <ul>
                <li>Economy shrank: -1.6% in 2023, -3.5% in 2024</li>
                <li>Inflation soared to 237% per year</li>
                <li>Poverty jumped from 38% to 53% initially</li>
                <li>Many people lost jobs and businesses struggled</li>
              </ul>

              <h5>The Recovery (Things Got Better)</h5>
              <ul>
                <li>Inflation dropped dramatically to under 3% per month</li>
                <li>Poverty fell back to 38% by end of 2024</li>
                <li>Economy projected to grow +5% in 2025</li>
                <li>
                  First budget surplus in 14 years (government income exceeds
                  spending)
                </li>
                <li>Argentina's credit rating improved</li>
                <li>Currency stabilized with only 1% monthly devaluation</li>
              </ul>

              <h5>The Ongoing Challenge</h5>
              <p>
                By mid-2025, the recovery showed some fragility. The economy
                contracted again in Q2 2025, showing that J-Curves aren't always
                smooth. Global economic conditions and other factors can slow
                the recovery, reminding us that these reforms are risky and
                don't always work as planned.
              </p>

              <h3>
                Conditions for Success: Why Some Reforms Work and Others Fail
              </h3>
              <p>
                Comparing successful cases (like Poland) with failures (like
                Russia in the 1990s) reveals critical factors that determine
                whether a J-Curve leads to recovery or becomes an L-shaped
                permanent decline:
              </p>

              <h4>1. Pre-existing Market Infrastructure</h4>
              <p>
                <strong>What it means:</strong> Some functioning private sector,
                even if small (private farms, small businesses, market
                experience).
              </p>
              <p>
                <strong>Why it matters:</strong> People need to know how markets
                work. Poland had private agriculture; Russia had complete state
                ownership. This gave Poles a head start in adapting to
                capitalism.
              </p>

              <h4>2. Stable Democratic Institutions</h4>
              <p>
                <strong>What it means:</strong> Legitimate government, rule of
                law, functioning courts, peaceful power transitions.
              </p>
              <p>
                <strong>Why it matters:</strong> Without stability, reforms
                can't be properly implemented. Corruption flourishes, contracts
                aren't enforced, and public trust evaporates. Poland had stable
                democracy; Russia faced political chaos.
              </p>

              <h4>3. Gradual, Equitable Privatization</h4>
              <p>
                <strong>What it means:</strong> Careful transfer of state assets
                to private hands, avoiding concentration of wealth.
              </p>
              <p>
                <strong>Why it matters:</strong> Rushed privatization (like
                Russia's voucher system) created oligarchs and extreme
                inequality. Poland's slower approach maintained public support
                and prevented wealth capture by a few insiders.
              </p>

              <h4>4. Social Safety Nets</h4>
              <p>
                <strong>What it means:</strong> Unemployment benefits, food
                assistance, healthcare, pension protection during transition.
              </p>
              <p>
                <strong>Why it matters:</strong> Cushions the blow for those who
                lose jobs. Reduces human suffering, prevents social unrest, and
                maintains political support for continuing reforms. Poland kept
                safety nets; Russia largely didn't.
              </p>

              <h4>5. External Financial Support</h4>
              <p>
                <strong>What it means:</strong> Aid, loans, or investment from
                international institutions (IMF, World Bank, EU) or foreign
                investors.
              </p>
              <p>
                <strong>Why it matters:</strong> Provides capital during the
                crisis, builds confidence, and helps stabilize currency. Poland
                had EU accession prospects; Argentina received $20B from the
                IMF.
              </p>

              <h4>6. Proper Sequencing</h4>
              <p>
                <strong>What it means:</strong> Doing reforms in the right
                order: price liberalization first, then privatization; monetary
                stability before structural reforms.
              </p>
              <p>
                <strong>Why it matters:</strong> Wrong sequence amplifies chaos.
                If you privatize before establishing market prices, assets get
                sold at arbitrary values, enabling corruption and wealth theft.
              </p>

              <h4>7. Political Will and Public Patience</h4>
              <p>
                <strong>What it means:</strong> Government stays the course
                through 6-18 months of pain; population believes recovery will
                come.
              </p>
              <p>
                <strong>Why it matters:</strong> If government caves to protests
                too early or reverses reforms, the pain was for nothing. Both
                Poland and Argentina maintained commitment despite protests.
              </p>

              <h4>8. Favorable Starting Conditions</h4>
              <p>
                <strong>What it means:</strong> Lower initial debt, younger
                population, intact trade relationships, moderate (not extreme)
                crisis.
              </p>
              <p>
                <strong>Why it matters:</strong> Easier to recover from a
                shallow hole than a deep one. Countries with multiple
                compounding crises (debt + demographics + trade collapse) face
                much harder paths.
              </p>

              <h4>The Bottom Line on Success Factors</h4>
              <p>
                No single factor guarantees success, but countries with more of
                these advantages tend to achieve genuine J-Curves. Those lacking
                them (like Russia in the 1990s) often experience L-curves—a dip
                without recovery.
                <strong
                  >Implementation details matter as much as the policies
                  themselves.</strong
                >
              </p>

              <h3>Key Takeaways</h3>
              <ul>
                <li>
                  <strong>Timing matters:</strong> The worst part usually lasts
                  6-18 months, but recovery can take years
                </li>
                <li>
                  <strong>Context matters:</strong> Countries that trade a lot
                  with other nations (like Argentina) tend to see sharper
                  J-Curves - deeper dips but faster recoveries
                </li>
                <li>
                  <strong>Not guaranteed:</strong> Just because you make painful
                  reforms doesn't mean recovery is certain - the economy could
                  stay depressed (an L-shape instead of a J-shape)
                </li>
              </ul>

              <h3>Understanding Negative Values on the Chart</h3>
              <p>
                When the curve dips below zero, it represents a genuine economic
                crisis: businesses closing, people losing jobs, money fleeing
                the country, and widespread hardship. These negative values show
                the real human cost of economic shocks before recovery begins.
              </p>

              <p>
                <strong>Bottom line:</strong> The J-Curve teaches us that major
                economic reforms often cause significant pain before delivering
                benefits. It's like economic surgery - the recovery period is
                tough, but the goal is to emerge healthier than before.
              </p>
            </div>
          </details>

          <form id="paramsFormJCurve" aria-labelledby="jcurve-heading">
            <div class="param-group">
              <label for="base-jcurve">Base Level (e.g., 0):</label>
              <input
                type="number"
                id="base-jcurve"
                value="0"
                step="0.1"
                aria-describedby="base-jcurve-help"
              />
              <small id="base-jcurve-help" class="sr-only"
                >Pre-shock economic indicator</small
              >
            </div>

            <div class="param-group">
              <label for="depth-jcurve">Dip Depth (positive, e.g., 10):</label>
              <input
                type="number"
                id="depth-jcurve"
                value="10"
                step="0.1"
                aria-describedby="depth-jcurve-help"
              />
              <small id="depth-jcurve-help" class="sr-only"
                >Initial shock severity</small
              >
            </div>

            <div class="param-group">
              <label for="tau-jcurve">Adjustment Time (τ, e.g., 2):</label>
              <input
                type="number"
                id="tau-jcurve"
                value="2"
                step="0.1"
                aria-describedby="tau-jcurve-help"
              />
              <small id="tau-jcurve-help" class="sr-only"
                >Time constant for recovery (higher = slower)</small
              >
            </div>

            <div class="param-group">
              <label for="slope-jcurve">Recovery Slope (e.g., 1):</label>
              <input
                type="number"
                id="slope-jcurve"
                value="1"
                step="0.1"
                aria-describedby="slope-jcurve-help"
              />
              <small id="slope-jcurve-help" class="sr-only"
                >Long-term improvement rate</small
              >
            </div>

            <button type="submit">Simulate</button>
          </form>

          <div
            class="chart-container"
            role="img"
            aria-labelledby="jcurve-chart-label"
          >
            <canvas
              id="growthChartJCurve"
              aria-label="Interactive J-Curve showing economic recovery after policy shock"
            ></canvas>
            <div id="jcurve-chart-label" class="sr-only">
              Chart displaying the J-Curve with time on x-axis and economic
              indicator on y-axis
            </div>
          </div>
          <div id="jcurve-insights" aria-live="polite"></div>
        </section>

        <section
          id="supplydemand-section"
          aria-labelledby="supplydemand-heading"
        >
          <details open>
            <summary>About Supply and Demand</summary>
            <div style="margin-top: 15px; line-height: 1.6">
              <p>
                The supply and demand model is the cornerstone of economics,
                illustrating how buyers (demand) and sellers (supply) interact
                to determine price and quantity in a market. Demand slopes
                downward: as price falls, more is bought. Supply slopes upward:
                as price rises, more is sold. Their intersection yields
                equilibrium—the price where quantity demanded equals quantity
                supplied, and markets clear without surplus or shortage.
              </p>

              <h3>Curve Structure</h3>
              <p>
                The graph plots price (vertical axis) against quantity
                (horizontal axis). The demand curve descends from left to right;
                the supply curve ascends. Shifts in either curve (due to taxes,
                subsidies, preferences, or costs) alter equilibrium, revealing
                surpluses (excess supply) or shortages (excess demand).
              </p>

              <h3>Mathematical Formulation</h3>
              <p>Demand: <em>P = a - bQ</em> (a: max price, b: sensitivity)</p>
              <p>Supply: <em>P = c + dQ</em> (c: min price, d: sensitivity)</p>
              <p>Equilibrium: Q* = (a - c)/(b + d), P* = c + dQ*</p>

              <h3>Understanding the Parameters (For Beginners)</h3>

              <h4>Demand Parameters</h4>
              <p><strong>a - Demand Intercept (Maximum Price):</strong></p>
              <p>
                This is the highest price any consumer would be willing to pay
                for the product. Think of it as the "dream price" for luxury
                buyers who really want the item regardless of cost. When
                quantity is zero, this is where the demand curve starts on the
                price axis. For example, if a = 120, it means at least one
                person would pay up to $120 for the very first unit.
              </p>

              <p><strong>b - Demand Slope (Price Sensitivity):</strong></p>
              <p>
                This measures how much the price needs to drop to get people to
                buy one more unit. A higher 'b' means demand is very sensitive
                to price changes (people buy a lot more when prices drop just a
                little). A lower 'b' means demand is less sensitive (people
                don't buy much more even if prices drop a lot). For example, if
                b = 2, the price needs to drop by $2 for every additional unit
                consumers want to buy.
              </p>

              <h4>Supply Parameters</h4>
              <p><strong>c - Supply Intercept (Minimum Price):</strong></p>
              <p>
                This is the minimum price producers need to receive to start
                selling their product at all. It covers their basic costs
                (materials, labor, overhead). If the market price falls below
                this, producers won't sell anything because they'd lose money.
                For example, if c = 20, producers need at least $20 to make it
                worthwhile to produce and sell even the first unit.
              </p>

              <p>
                <strong>d - Supply Slope (Production Cost Increase):</strong>
              </p>
              <p>
                This measures how much the price needs to rise for producers to
                supply one more unit. As producers make more, their costs
                typically go up (overtime wages, less efficient equipment,
                higher material costs). A higher 'd' means it gets expensive
                quickly to produce more. For example, if d = 2, producers need
                $2 more per unit to justify producing each additional item.
              </p>

              <h4>How These Work Together</h4>
              <p>
                The equilibrium happens where these curves intersect—where the
                price consumers are willing to pay exactly equals the price
                producers need to receive. At this point, the quantity demanded
                equals the quantity supplied, and the market clears naturally
                without government intervention.
              </p>

              <h3>Understanding Negative Prices</h3>
              <p>
                In the mathematical model, you may see negative prices on the
                chart at very high quantities. While negative prices are unusual
                in real markets, they can occur in special circumstances and
                help illustrate important economic concepts:
              </p>

              <h4>On the Demand Curve (Negative Willingness to Pay)</h4>
              <p>
                When the demand curve drops below zero, it means consumers would
                need to be paid to take the product. Real-world examples
                include:
              </p>
              <ul>
                <li>
                  <strong>Waste disposal:</strong> If you produce too many
                  widgets that nobody wants, you might have to pay people to
                  haul them away
                </li>
                <li>
                  <strong>Negative oil prices (2020):</strong> During COVID-19,
                  oil storage filled up and producers literally paid buyers to
                  take oil off their hands rather than shut down wells
                </li>
                <li>
                  <strong>Perishable goods:</strong> A restaurant with too much
                  food at closing time might give it away free or even pay to
                  have it removed
                </li>
                <li>
                  <strong>Excess inventory:</strong> Companies sometimes pay
                  liquidators to clear out unsold merchandise
                </li>
              </ul>

              <h4>On the Supply Curve (Negative Production Costs)</h4>
              <p>
                When the supply curve goes below zero at low quantities, it
                represents a theoretical scenario where producers would pay to
                produce. While rare, this can happen when:
              </p>
              <ul>
                <li>
                  <strong>Byproduct value:</strong> Manufacturing a product
                  generates valuable byproducts that offset costs (though this
                  usually adjusts the cost structure)
                </li>
                <li>
                  <strong>Government subsidies:</strong> Producers receive
                  payments that exceed their production costs
                </li>
                <li>
                  <strong>Learning by doing:</strong> Early production builds
                  skills and knowledge worth more than the cost
                </li>
              </ul>

              <h4>Practical Note</h4>
              <p>
                In most real markets, producers simply stop supplying when
                prices fall too low, and consumers stop demanding at very high
                prices. Negative prices represent extreme theoretical scenarios
                that help us understand the mathematical model. For educational
                purposes, they demonstrate that these are linear projections—in
                reality, markets don't operate at these extreme quantities.
              </p>

              <h3>Policy Implications</h3>
              <ul>
                <li>Price ceilings create shortages; floors, surpluses.</li>
                <li>
                  Taxes shift supply up, reducing quantity; subsidies shift
                  down, increasing it.
                </li>
                <li>
                  <strong>Elasticity (b, d) shows responsiveness:</strong> This
                  measures how much quantity changes when price changes.
                  <ul>
                    <li>
                      <strong
                        >Steep curves (high b or d values) = Inelastic/Rigid
                        markets:</strong
                      >
                      Quantity doesn't change much even with big price changes.
                      Examples: insulin (people need it regardless of price),
                      gasoline in the short term (you still need to drive to
                      work), salt (you use about the same amount no matter the
                      price). The curve is steep/vertical because quantity is
                      relatively fixed.
                    </li>
                    <li>
                      <strong
                        >Flat curves (low b or d values) = Elastic/Flexible
                        markets:</strong
                      >
                      Quantity changes a lot with small price changes. Examples:
                      restaurant meals (if one place raises prices, people
                      easily switch to competitors), luxury goods (if designer
                      bags get too expensive, people skip them), seasonal fruits
                      (if strawberries are expensive, buy blueberries instead).
                      The curve is flat/horizontal because consumers or
                      producers react strongly to price.
                    </li>
                    <li>
                      <strong>Why this matters for policy:</strong> Taxing
                      inelastic goods (like cigarettes or gasoline) raises lots
                      of revenue because people keep buying. Taxing elastic
                      goods raises less revenue because people quickly switch to
                      alternatives. Similarly, subsidizing inelastic goods
                      doesn't boost consumption much, but subsidizing elastic
                      goods can dramatically increase purchases.
                    </li>
                  </ul>
                </li>
              </ul>

              <h3>Historical Context</h3>
              <p>
                Rooted in Adam Smith's "invisible hand" (1776), formalized by
                Alfred Marshall in 1890. It underpins modern microeconomics,
                guiding antitrust, trade, and regulation.
              </p>

              <p>
                In summary, supply and demand reveals the invisible forces that
                balance markets—or disrupt them under princely decree.
              </p>
            </div>
          </details>

          <form
            id="paramsFormSupplyDemand"
            aria-labelledby="supplydemand-heading"
          >
            <div class="param-group">
              <label for="a-supplydemand"
                >Demand Intercept (a, maximum price, e.g., 120):</label
              >
              <input
                type="number"
                id="a-supplydemand"
                value="120"
                step="1"
                aria-describedby="a-supplydemand-help"
              />
              <small id="a-supplydemand-help" class="sr-only"
                >Max price consumers will pay</small
              >
            </div>

            <div class="param-group">
              <label for="b-supplydemand"
                >Demand Slope (b, price sensitivity, positive, e.g., 2):</label
              >
              <input
                type="number"
                id="b-supplydemand"
                value="2"
                step="0.1"
                aria-describedby="b-supplydemand-help"
              />
              <small id="b-supplydemand-help" class="sr-only"
                >Price sensitivity of demand</small
              >
            </div>

            <div class="param-group">
              <label for="c-supplydemand"
                >Supply Intercept (c, minimum price, e.g., 20):</label
              >
              <input
                type="number"
                id="c-supplydemand"
                value="20"
                step="1"
                aria-describedby="c-supplydemand-help"
              />
              <small id="c-supplydemand-help" class="sr-only"
                >Min price producers accept</small
              >
            </div>

            <div class="param-group">
              <label for="d-supplydemand"
                >Supply Slope (d, production cost increase, positive, e.g.,
                2):</label
              >
              <input
                type="number"
                id="d-supplydemand"
                value="2"
                step="0.1"
                aria-describedby="d-supplydemand-help"
              />
              <small id="d-supplydemand-help" class="sr-only"
                >Price sensitivity of supply</small
              >
            </div>

            <button type="submit">Simulate</button>
          </form>

          <div
            class="chart-container"
            role="img"
            aria-labelledby="supplydemand-chart-label"
          >
            <canvas
              id="growthChartSupplyDemand"
              aria-label="Interactive Supply and Demand curves showing market equilibrium"
            ></canvas>
            <div id="supplydemand-chart-label" class="sr-only">
              Chart displaying Supply and Demand with quantity on x-axis and
              price on y-axis
            </div>
          </div>
          <div id="equilibrium-supplydemand" aria-live="polite"></div>
        </section>
      </div>
    </div>

    <script>
      // Armey Curve
      const ctxArmey = document
        .getElementById("growthChartArmey")
        .getContext("2d");
      let chartArmey;

      function simulateCurveArmey(beta0, beta1, beta2) {
        const spending = Array.from({ length: 101 }, (_, i) => i); // 0% to 100%
        const growth = spending.map((g) => beta0 + beta1 * g + beta2 * g * g);

        if (chartArmey) chartArmey.destroy();
        chartArmey = new Chart(ctxArmey, {
          type: "line",
          data: {
            labels: spending,
            datasets: [
              {
                label: "Growth Rate (%)",
                data: growth,
                borderColor: "blue",
                fill: false,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              x: {
                title: { display: true, text: "Public Spending (% of GDP)" },
              },
              y: { title: { display: true, text: "GDP Growth Rate (%)" } },
            },
          },
        });

        // Calculate optimal
        const optimal = -beta1 / (2 * beta2);
        document.getElementById(
          "optimal-armey"
        ).innerText = `Optimal Spending: ${optimal.toFixed(
          2
        )}% of GDP (where growth is maximized at ${(
          beta0 +
          beta1 * optimal +
          beta2 * optimal * optimal
        ).toFixed(2)}%)`;
      }

      document
        .getElementById("paramsFormArmey")
        .addEventListener("submit", (e) => {
          e.preventDefault();
          const beta0 = parseFloat(
            document.getElementById("beta0-armey").value
          );
          const beta1 = parseFloat(
            document.getElementById("beta1-armey").value
          );
          const beta2 = parseFloat(
            document.getElementById("beta2-armey").value
          );
          if (beta2 >= 0) {
            alert("β₂ should be negative for an inverted U-shape.");
            return;
          }
          simulateCurveArmey(beta0, beta1, beta2);
        });

      // Initial simulation for Armey
      simulateCurveArmey(4.5, 0.5, -0.01);

      // Laffer Curve
      const ctxLaffer = document
        .getElementById("growthChartLaffer")
        .getContext("2d");
      let chartLaffer;

      function simulateCurveLaffer(beta0, beta1, beta2) {
        const taxRate = Array.from({ length: 101 }, (_, i) => i); // 0% to 100%
        const revenue = taxRate.map((t) => beta0 + beta1 * t + beta2 * t * t);

        if (chartLaffer) chartLaffer.destroy();
        chartLaffer = new Chart(ctxLaffer, {
          type: "line",
          data: {
            labels: taxRate,
            datasets: [
              {
                label: "Consent to Taxation",
                data: revenue,
                borderColor: "green",
                fill: false,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              x: {
                title: { display: true, text: "Tax Rate (%)" },
              },
              y: { title: { display: true, text: "Consent to Taxation" } },
            },
          },
        });

        // Calculate optimal
        const optimal = -beta1 / (2 * beta2);
        document.getElementById(
          "optimal-laffer"
        ).innerText = `Optimal Tax Rate: ${optimal.toFixed(
          2
        )}% (where taxation consent is maximized at ${(
          beta0 +
          beta1 * optimal +
          beta2 * optimal * optimal
        ).toFixed(2)})`;
      }

      document
        .getElementById("paramsFormLaffer")
        .addEventListener("submit", (e) => {
          e.preventDefault();
          const beta0 = parseFloat(
            document.getElementById("beta0-laffer").value
          );
          const beta1 = parseFloat(
            document.getElementById("beta1-laffer").value
          );
          const beta2 = parseFloat(
            document.getElementById("beta2-laffer").value
          );
          if (beta2 >= 0) {
            alert("β₂ should be negative for an inverted U-shape.");
            return;
          }
          simulateCurveLaffer(beta0, beta1, beta2);
        });

      // Initial simulation for Laffer
      simulateCurveLaffer(0, 1, -0.02);

      // J-Curve
      const ctxJCurve = document
        .getElementById("growthChartJCurve")
        .getContext("2d");
      let chartJCurve;

      function simulateCurveJCurve(base, depth, tau, slope) {
        const time = Array.from({ length: 21 }, (_, i) => i); // 0 to 20 periods
        const indicator = time.map(
          (t) => base + slope * t - depth * (1 - Math.exp(-t / tau))
        );

        if (chartJCurve) chartJCurve.destroy();
        chartJCurve = new Chart(ctxJCurve, {
          type: "line",
          data: {
            labels: time,
            datasets: [
              {
                label: "Economic Indicator (e.g., Trade Balance % GDP)",
                data: indicator,
                borderColor: "red",
                fill: false,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              x: {
                title: { display: true, text: "Time (Years/Quarters)" },
              },
              y: { title: { display: true, text: "Indicator Value" } },
            },
          },
        });

        // Insights: e.g., time to breakeven (trough where dY/dt = 0)
        let troughTime = 0;
        if ((slope * tau) / depth < 1) {
          troughTime = -tau * Math.log((slope * tau) / depth);
        }
        const recoveryValue =
          base + slope * 10 - depth * (1 - Math.exp(-10 / tau));
        document.getElementById(
          "jcurve-insights"
        ).innerText = `Trough ~${troughTime.toFixed(
          1
        )} periods; 10-period value: ${recoveryValue.toFixed(
          2
        )} (max dip: ~-${depth.toFixed(1)})`;
      }

      document
        .getElementById("paramsFormJCurve")
        .addEventListener("submit", (e) => {
          e.preventDefault();
          const base = parseFloat(document.getElementById("base-jcurve").value);
          const depth = parseFloat(
            document.getElementById("depth-jcurve").value
          );
          const tau = parseFloat(document.getElementById("tau-jcurve").value);
          const slope = parseFloat(
            document.getElementById("slope-jcurve").value
          );
          if (depth <= 0 || tau <= 0 || slope <= 0) {
            alert("Depth, τ, and Slope should be positive for a J-shape.");
            return;
          }
          simulateCurveJCurve(base, depth, tau, slope);
        });

      // Initial simulation for J-Curve
      simulateCurveJCurve(0, 10, 2, 1);

      // Supply and Demand
      const ctxSupplyDemand = document
        .getElementById("growthChartSupplyDemand")
        .getContext("2d");
      let chartSupplyDemand;

      function simulateSupplyDemand(a, b, c, d) {
        // Calculate equilibrium first to set appropriate range
        const eqQ = (a - c) / (b + d);
        const eqP = c + d * eqQ;

        // Check for invalid equilibrium (negative values)
        if (eqQ < 0 || eqP < 0 || isNaN(eqQ) || isNaN(eqP)) {
          alert(
            "No positive equilibrium exists with these parameters. Please adjust values so demand intercept (a) > supply intercept (c)."
          );
          return;
        }

        // Dynamic range: show up to 150% of equilibrium or minimum of 100
        const maxQ = Math.ceil(Math.max(100, eqQ * 1.5));
        // Use integer quantities for clean axis labels
        const quantity = Array.from({ length: maxQ + 1 }, (_, i) => i);
        const demandPrice = quantity.map((q) => a - b * q);
        const supplyPrice = quantity.map((q) => c + d * q);

        if (chartSupplyDemand) chartSupplyDemand.destroy();
        chartSupplyDemand = new Chart(ctxSupplyDemand, {
          type: "line",
          data: {
            labels: quantity,
            datasets: [
              {
                label: "Demand",
                data: demandPrice,
                borderColor: "purple",
                fill: false,
              },
              {
                label: "Supply",
                data: supplyPrice,
                borderColor: "orange",
                fill: false,
              },
              {
                label: "Equilibrium",
                data: [{ x: Math.round(eqQ), y: eqP }],
                pointRadius: 20,
                pointHoverRadius: 22,
                pointBackgroundColor: "red",
                pointBorderColor: "darkred",
                pointBorderWidth: 2,
                pointHoverBorderWidth: 3,
                showLine: false,
                type: "scatter",
                xAxisID: "x",
                yAxisID: "y",
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              tooltip: {
                callbacks: {
                  label: function (context) {
                    if (context.dataset.label === "Equilibrium") {
                      return `Equilibrium: Quantity ${Math.round(
                        context.parsed.x
                      )}, Price $${context.parsed.y.toFixed(2)}`;
                    }
                    if (context.dataset.label === "Demand") {
                      return `Demand curve: At quantity ${context.parsed.x.toFixed(
                        0
                      )}, consumers will pay $${context.parsed.y.toFixed(2)}`;
                    }
                    if (context.dataset.label === "Supply") {
                      return `Supply curve: At quantity ${context.parsed.x.toFixed(
                        0
                      )}, producers need $${context.parsed.y.toFixed(2)}`;
                    }
                    return `${
                      context.dataset.label
                    }: $${context.parsed.y.toFixed(2)}`;
                  },
                },
              },
            },
            scales: {
              x: {
                title: { display: true, text: "Quantity" },
                ticks: {
                  maxTicksLimit: 10,
                  callback: function (value, index, ticks) {
                    return Number.isInteger(value) ? value : value.toFixed(0);
                  },
                },
              },
              y: {
                title: { display: true, text: "Price" },
                ticks: {
                  maxTicksLimit: 10,
                },
              },
            },
          },
        });

        // Display equilibrium values (already calculated at the top)
        document.getElementById(
          "equilibrium-supplydemand"
        ).innerHTML = `<strong>Market Equilibrium (where supply meets demand):</strong><br>
        • Equilibrium Quantity: ${Math.round(eqQ)} units<br>
        • Equilibrium Price: $${eqP.toFixed(2)}<br>
        <em style="font-size: 14px; font-weight: normal;">At this point, buyers want to purchase exactly the amount sellers want to sell. The market is balanced with no shortage or surplus.</em>`;
      }

      document
        .getElementById("paramsFormSupplyDemand")
        .addEventListener("submit", (e) => {
          e.preventDefault();
          const a = parseFloat(document.getElementById("a-supplydemand").value);
          const b = parseFloat(document.getElementById("b-supplydemand").value);
          const c = parseFloat(document.getElementById("c-supplydemand").value);
          const d = parseFloat(document.getElementById("d-supplydemand").value);
          if (b <= 0 || d <= 0) {
            alert("Slopes b and d should be positive.");
            return;
          }
          simulateSupplyDemand(a, b, c, d);
        });

      // Initial simulation for Supply-Demand
      // Formula: Q* = (a-c)/(b+d), P* = c + d*Q*
      // For integer price: a=120, b=2, c=20, d=2 gives Q*=(120-20)/(2+2)=25, P*=20+2*25=70 ✓
      simulateSupplyDemand(120, 2, 20, 2);

      // Handle window resize
      function handleResize() {
        if (chartArmey) {
          chartArmey.resize();
        }
        if (chartLaffer) {
          chartLaffer.resize();
        }
        if (chartJCurve) {
          chartJCurve.resize();
        }
        if (chartSupplyDemand) {
          chartSupplyDemand.resize();
        }
      }

      // Add resize event listener with debouncing for better performance
      let resizeTimeout;
      window.addEventListener("resize", () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(handleResize, 100);
      });
    </script>
  </body>
</html>
